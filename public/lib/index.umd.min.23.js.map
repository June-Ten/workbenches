{"version":3,"sources":["webpack://avueData/./src/views/basic/messageRecord/Form.vue","webpack://avueData/src/views/basic/messageRecord/Form.vue","webpack://avueData/./src/views/basic/messageRecord/Form.vue?87db","webpack://avueData/./src/views/basic/messageRecord/Form.vue?febe","webpack://avueData/./src/views/basic/messageRecord/index.vue?37bd","webpack://avueData/./src/views/basic/messageRecord/Form.vue?a83c","webpack://avueData/./src/views/basic/messageRecord/index.vue","webpack://avueData/src/views/basic/messageRecord/index.vue","webpack://avueData/./src/views/basic/messageRecord/index.vue?63dc","webpack://avueData/./src/views/basic/messageRecord/index.vue?81bd"],"names":["render","_vm","this","_c","_self","staticClass","attrs","visible","on","$event","directives","name","rawName","value","loading","expression","_v","_s","info","title","_f","releaseTime","releaseUser","excerpt","domProps","bodyText","files","length","model","callback","$$v","_e","staticRenderFns","data","methods","init","id","ReadInfo","component","nativeOn","preventDefault","type","indexOf","_k","keyCode","key","search","keyword","$t","reset","activeName","_l","messageList","item","enCode","fullName","handleDel","initData","listLoading","list","handleSelectionChange","scopedSlots","_u","fn","scope","staticStyle","readInfo","row","getType","jnpf","tableDateFormat","isRead","total","listQuery","currentPage","pageSize","$set","formVisible","ref","scheduleVisible","components","Form","ScheduleView","multipleSelection","sort","watch","val","created","getDictionaryData","getMessageList","ids","then","MessageDeleteRecord","message","catch"],"mappings":"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","file":"index.umd.min.23.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('el-dialog',{staticClass:\"JNPF-dialog JNPF-dialog_center JNPF-dialog-notice\",attrs:{\"title\":\"查看消息\",\"close-on-click-modal\":false,\"visible\":_vm.visible,\"lock-scroll\":\"\",\"width\":\"80%\",\"append-to-body\":\"\"},on:{\"update:visible\":function($event){_vm.visible=$event}}},[_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"notice-wrapper\"},[_c('div',{staticClass:\"notice-hd\"},[_c('h1',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.info.title))]),_c('div',{staticClass:\"info\"},[_c('span',[_vm._v(_vm._s(_vm._f(\"toDate\")(_vm.info.releaseTime)))]),_c('span',[_vm._v(_vm._s(_vm.info.releaseUser))])])]),_c('p',{staticClass:\"excerpt\"},[_vm._v(_vm._s(_vm.info.excerpt))]),_c('div',{staticClass:\"main\"},[_c('div',{staticClass:\"ql-editor\",domProps:{\"innerHTML\":_vm._s(_vm.info.bodyText)}})]),(_vm.files.length)?_c('div',{staticClass:\"file-list\"},[_c('JnpfUploadFile',{attrs:{\"disabled\":\"\",\"detailed\":\"\"},model:{value:(_vm.files),callback:function ($$v) {_vm.files=$$v},expression:\"files\"}})],1):_vm._e()])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <el-dialog title=\"查看消息\" :close-on-click-modal=\"false\" :visible.sync=\"visible\"\r\n    class=\"JNPF-dialog JNPF-dialog_center JNPF-dialog-notice\" lock-scroll width=\"80%\"\r\n    append-to-body>\r\n    <div class=\"notice-wrapper\" v-loading=\"loading\">\r\n      <div class=\"notice-hd\">\r\n        <h1 class=\"title\">{{info.title}}</h1>\r\n        <div class=\"info\">\r\n          <span>{{info.releaseTime|toDate()}}</span><span>{{info.releaseUser}}</span>\r\n        </div>\r\n      </div>\r\n      <p class=\"excerpt\">{{ info.excerpt }}</p>\r\n      <div class=\"main\">\r\n        <div class=\"ql-editor\" v-html=\"info.bodyText\"></div>\r\n      </div>\r\n      <div class=\"file-list\" v-if=\"files.length\">\r\n        <JnpfUploadFile v-model=\"files\" disabled detailed />\r\n      </div>\r\n    </div>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script>\r\nimport { ReadInfo } from '@/api/system/message'\r\nexport default {\r\n  data() {\r\n    return {\r\n      visible: false,\r\n      loading: false,\r\n      files: [],\r\n      info: {}\r\n    }\r\n  },\r\n  methods: {\r\n    init(id) {\r\n      this.visible = true\r\n      this.loading = true\r\n      ReadInfo(id).then(res => {\r\n        this.info = res.data\r\n        this.files = res.data.files ? JSON.parse(res.data.files) : []\r\n        this.loading = false\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.main ::v-deep  a {\r\n  color: #06c !important;\r\n}\r\n.main {\r\n  margin-top: 0px !important;\r\n  ::v-deep  .ql-editor {\r\n    white-space: unset;\r\n  }\r\n}\r\n.notice-wrapper {\r\n  .notice-hd {\r\n    padding: 24px 0;\r\n    .title {\r\n      color: #303133;\r\n      margin-top: 0;\r\n      margin-bottom: 8px;\r\n    }\r\n    .info {\r\n      color: #606266;\r\n      padding-bottom: 24px;\r\n      line-height: normal;\r\n    }\r\n  }\r\n  .excerpt {\r\n    color: #303133;\r\n    margin-bottom: 8px !important;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Form.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Form.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Form.vue?vue&type=template&id=47332dda&scoped=true&\"\nimport script from \"./Form.vue?vue&type=script&lang=js&\"\nexport * from \"./Form.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Form.vue?vue&type=style&index=0&id=47332dda&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"47332dda\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=3d41dee8&prod&lang=scss&scoped=true&\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Form.vue?vue&type=style&index=0&id=47332dda&prod&lang=scss&scoped=true&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"JNPF-common-layout MessageRecord-container\"},[_c('div',{staticClass:\"JNPF-common-layout-center\"},[_c('el-row',{staticClass:\"JNPF-common-search-box\",attrs:{\"gutter\":16}},[_c('el-form',{nativeOn:{\"submit\":function($event){$event.preventDefault();}}},[_c('el-col',{attrs:{\"span\":6}},[_c('el-form-item',{attrs:{\"label\":\"关键词\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入关键词查询\",\"clearable\":\"\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.search()}},model:{value:(_vm.keyword),callback:function ($$v) {_vm.keyword=$$v},expression:\"keyword\"}})],1)],1),_c('el-col',{attrs:{\"span\":6}},[_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-search\"},on:{\"click\":function($event){return _vm.search()}}},[_vm._v(\" \"+_vm._s(_vm.$t('common.search')))]),_c('el-button',{attrs:{\"icon\":\"el-icon-refresh-right\"},on:{\"click\":function($event){return _vm.reset()}}},[_vm._v(_vm._s(_vm.$t('common.reset'))+\" \")])],1)],1)],1)],1),_c('div',{staticClass:\"JNPF-common-layout-main JNPF-flex-main\"},[_c('el-tabs',{staticClass:\"messageRecord-tab\",attrs:{\"type\":\"border-card\"},model:{value:(_vm.activeName),callback:function ($$v) {_vm.activeName=$$v},expression:\"activeName\"}},[_vm._l((_vm.messageList),function(item){return _c('el-tab-pane',{key:item.enCode,attrs:{\"label\":item.fullName,\"name\":item.enCode}})}),_c('div',{staticClass:\"box\"},[_c('div',{staticClass:\"JNPF-common-head\"},[_c('div',{staticClass:\"left-btn\"},[_c('el-button',{attrs:{\"type\":\"danger\",\"icon\":\"el-icon-delete\"},on:{\"click\":_vm.handleDel}},[_vm._v(\"删除\")])],1),_c('div',{staticClass:\"JNPF-common-head-right\"},[_c('el-tooltip',{attrs:{\"effect\":\"dark\",\"content\":_vm.$t('common.refresh'),\"placement\":\"top\"}},[_c('el-link',{attrs:{\"icon\":\"icon-ym icon-ym-Refresh JNPF-common-head-icon\",\"underline\":false},on:{\"click\":function($event){return _vm.initData()}}})],1)],1)]),_c('JNPF-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.listLoading),expression:\"listLoading\"}],attrs:{\"data\":_vm.list,\"hasC\":\"\"},on:{\"selection-change\":_vm.handleSelectionChange}},[_c('el-table-column',{attrs:{\"prop\":\"title\",\"label\":\"消息标题\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-link',{staticStyle:{\"font-size\":\"12px\"},on:{\"click\":function($event){return _vm.readInfo(scope.row)}}},[_vm._v(_vm._s(scope.row.title)+\" \")])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"type\",\"label\":\"消息类型\",\"width\":\"120\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\" \"+_vm._s(_vm.getType(scope.row.type))+\" \")]}}])}),_c('el-table-column',{attrs:{\"prop\":\"releaseUser\",\"label\":\"发送人员\",\"width\":\"120\"}}),_c('el-table-column',{attrs:{\"prop\":\"releaseTime\",\"label\":\"发送时间\",\"formatter\":_vm.jnpf.tableDateFormat,\"width\":\"120\"}}),_c('el-table-column',{attrs:{\"prop\":\"isRead\",\"label\":\"状态\",\"width\":\"100\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.isRead=='1')?_c('el-tag',{attrs:{\"type\":\"success\"}},[_vm._v(\"已读\")]):_c('el-tag',{attrs:{\"type\":\"info\"}},[_vm._v(\"未读\")])]}}])})],1),_c('pagination',{attrs:{\"total\":_vm.total,\"page\":_vm.listQuery.currentPage,\"limit\":_vm.listQuery.pageSize},on:{\"update:page\":function($event){return _vm.$set(_vm.listQuery, \"currentPage\", $event)},\"update:limit\":function($event){return _vm.$set(_vm.listQuery, \"pageSize\", $event)},\"pagination\":_vm.initData}})],1)],2)],1)],1),(_vm.formVisible)?_c('Form',{ref:\"Form\",on:{\"refreshDataList\":_vm.initData}}):_vm._e(),(_vm.scheduleVisible)?_c('ScheduleView',{ref:\"schedule\"}):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"JNPF-common-layout MessageRecord-container\">\r\n    <div class=\"JNPF-common-layout-center\">\r\n      <el-row class=\"JNPF-common-search-box\" :gutter=\"16\">\r\n        <el-form @submit.native.prevent>\r\n          <el-col :span=\"6\">\r\n            <el-form-item label=\"关键词\">\r\n              <el-input v-model=\"keyword\" placeholder=\"请输入关键词查询\" clearable\r\n                @keyup.enter.native=\"search()\" />\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"6\">\r\n            <el-form-item>\r\n              <el-button type=\"primary\" icon=\"el-icon-search\" @click=\"search()\">\r\n                {{$t('common.search')}}</el-button>\r\n              <el-button icon=\"el-icon-refresh-right\" @click=\"reset()\">{{$t('common.reset')}}\r\n              </el-button>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-form>\r\n      </el-row>\r\n      <div class=\"JNPF-common-layout-main JNPF-flex-main\">\r\n        <el-tabs type=\"border-card\" v-model=\"activeName\" class=\"messageRecord-tab\">\r\n          <el-tab-pane :label=\"item.fullName\" :name=\"item.enCode\" :key=\"item.enCode\"\r\n            v-for=\"item in messageList\"></el-tab-pane>\r\n          <div class=\"box\">\r\n            <div class=\"JNPF-common-head\">\r\n              <div class=\"left-btn\">\r\n                <el-button type=\"danger\" @click=\"handleDel\" icon=\"el-icon-delete\">删除</el-button>\r\n              </div>\r\n              <div class=\"JNPF-common-head-right\">\r\n                <el-tooltip effect=\"dark\" :content=\"$t('common.refresh')\" placement=\"top\">\r\n                  <el-link icon=\"icon-ym icon-ym-Refresh JNPF-common-head-icon\" :underline=\"false\"\r\n                    @click=\"initData()\" />\r\n                </el-tooltip>\r\n              </div>\r\n            </div>\r\n            <JNPF-table v-loading=\"listLoading\" :data=\"list\" hasC\r\n              @selection-change=\"handleSelectionChange\">\r\n              <el-table-column prop=\"title\" label=\"消息标题\">\r\n                <template slot-scope=\"scope\">\r\n                  <el-link @click=\"readInfo(scope.row)\" style=\"font-size:12px\">{{ scope.row.title }}\r\n                  </el-link>\r\n                </template>\r\n              </el-table-column>\r\n              <el-table-column prop=\"type\" label=\"消息类型\" width=\"120\">\r\n                <template slot-scope=\"scope\">\r\n                  {{getType(scope.row.type)}}\r\n                </template>\r\n              </el-table-column>\r\n              <el-table-column prop=\"releaseUser\" label=\"发送人员\" width=\"120\">\r\n              </el-table-column>\r\n              <el-table-column prop=\"releaseTime\" label=\"发送时间\" :formatter=\"jnpf.tableDateFormat\"\r\n                width=\"120\" />\r\n              <el-table-column prop=\"isRead\" label=\"状态\" width=\"100\">\r\n                <template slot-scope=\"scope\">\r\n                  <el-tag type=\"success\" v-if=\"scope.row.isRead=='1'\">已读</el-tag>\r\n                  <el-tag type=\"info\" v-else>未读</el-tag>\r\n                </template>\r\n              </el-table-column>\r\n            </JNPF-table>\r\n            <pagination :total=\"total\" :page.sync=\"listQuery.currentPage\"\r\n              :limit.sync=\"listQuery.pageSize\" @pagination=\"initData\" />\r\n          </div>\r\n        </el-tabs>\r\n      </div>\r\n    </div>\r\n    <Form v-if=\"formVisible\" ref=\"Form\" @refreshDataList=\"initData\" />\r\n    <ScheduleView v-if='scheduleVisible' ref=\"schedule\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getMessageList, MessageDeleteRecord, ReadInfo } from '@/api/system/message'\r\nimport Form from './Form'\r\nimport ScheduleView from '@/components/ScheduleView'\r\nexport default {\r\n  name: 'messageRecord',\r\n  components: { Form, ScheduleView },\r\n  data() {\r\n    return {\r\n      visible: false,\r\n      formVisible: false,\r\n      keyword: '',\r\n      activeName: \"0\",\r\n      list: [],\r\n      multipleSelection: [],\r\n      total: 0,\r\n      listLoading: true,\r\n      listQuery: {\r\n        currentPage: 1,\r\n        pageSize: 20,\r\n        sort: 'desc',\r\n      },\r\n      scheduleVisible: false,\r\n      messageList: []\r\n    }\r\n  },\r\n  watch: {\r\n    activeName(val) {\r\n      this.keyword = ''\r\n      this.search()\r\n    }\r\n  },\r\n  created() {\r\n    this.getDictionaryData()\r\n    this.initData()\r\n  },\r\n  methods: {\r\n    search() {\r\n      this.listQuery = {\r\n        currentPage: 1,\r\n        pageSize: 20,\r\n        sort: 'desc',\r\n      }\r\n      this.initData()\r\n    },\r\n    reset() {\r\n      this.keyword = ''\r\n      this.search()\r\n    },\r\n    getDictionaryData() {\r\n      this.messageList = []\r\n      this.$store.dispatch('base/getDictionaryData', { sort: 'msgSourceType' }).then((res) => {\r\n        let item = { id: '0', fullName: '全部', enCode: '0' }\r\n        this.messageList.push(item, ...res)\r\n      })\r\n    },\r\n    getType(type) {\r\n      let item = this.messageList.filter(o => o.enCode == type)[0]\r\n      return item && item.fullName || ''\r\n    },\r\n    initData() {\r\n      this.listLoading = true\r\n      let data = {\r\n        ...this.listQuery,\r\n        keyword: this.keyword,\r\n        type: this.activeName == '0' ? '' : this.activeName\r\n      }\r\n      this.list = []\r\n      getMessageList(data).then(res => {\r\n        this.list = res.data.list\r\n        this.total = res.data.pagination.total\r\n        this.listLoading = false\r\n      })\r\n    },\r\n    handleDel() {\r\n      if (!this.multipleSelection.length) {\r\n        this.$message({ type: 'error', message: '请选择一条数据' });\r\n        return\r\n      }\r\n      let data = {\r\n        ids: this.multipleSelection.join(',')\r\n      }\r\n      this.$confirm('您确定要删除这些数据吗, 是否继续?', '提示', {\r\n        type: 'warning'\r\n      }).then(() => {\r\n        MessageDeleteRecord(data).then(res => {\r\n          this.$message({\r\n            type: 'success',\r\n            message: res.msg\r\n          });\r\n          this.initData();\r\n        })\r\n      }).catch(() => { });\r\n    },\r\n    handleSelectionChange(val) {\r\n      this.multipleSelection = val.map(item => item.id)\r\n    },\r\n    readInfo(item) {\r\n      ReadInfo(item.id).then(res => {\r\n        this.info = res.data\r\n        this.files = res.data.files ? JSON.parse(res.data.files) : []\r\n        if (item.isRead == '0') {\r\n          item.isRead = '1'\r\n          this.$emit('read')\r\n        }\r\n        if (item.type == 4) {\r\n          let bodyText = JSON.parse(res.data.bodyText)\r\n          if (bodyText.type == 3) return\r\n          this.scheduleVisible = true\r\n          this.$nextTick(() => {\r\n            this.$refs.schedule.init(bodyText.id, '', bodyText.groupId)\r\n          })\r\n          return\r\n        }\r\n        if (item.type == 2 && item.flowType == 2) {\r\n          let bodyText = JSON.parse(res.data.bodyText)\r\n          this.drawer = false\r\n          this.$router.push('/workFlow/entrust?config=' + bodyText.type)\r\n        } else {\r\n          if (item.type == 1 || item.type == 3) {\r\n            this.formVisible = true\r\n            this.$nextTick(() => {\r\n              this.$refs.Form.init(item.id)\r\n            })\r\n          } else {\r\n            if (!res.data.bodyText) return\r\n            this.drawer = false\r\n            const Base64 = require('js-base64').Base64\r\n            this.$router.push('/workFlowDetail?config=' + encodeURIComponent(Base64.encode(res.data.bodyText)))\r\n          }\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.MessageRecord-container {\r\n  .JNPF-common-layout-main {\r\n    padding: 0;\r\n  }\r\n  .messageRecord-tab {\r\n    height: 100%;\r\n    ::v-deep  .el-tabs__content {\r\n      padding: 0;\r\n      height: calc(100% - 40px);\r\n      .box {\r\n        flex: 1;\r\n        height: 100%;\r\n        overflow: hidden;\r\n        display: flex;\r\n        flex-direction: column;\r\n        padding-bottom: 10px;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=3d41dee8&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=3d41dee8&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3d41dee8\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}