(("undefined"!==typeof self?self:this)["webpackJsonpavueData"]=("undefined"!==typeof self?self:this)["webpackJsonpavueData"]||[]).push([[7],{"19ac":function(t,e,a){"use strict";a.d(e,"c",(function(){return i})),a.d(e,"d",(function(){return n})),a.d(e,"a",(function(){return r})),a.d(e,"b",(function(){return o}));a("99af");var s=a("b775");function i(){return Object(s["a"])({url:"/api/permission/socials",method:"GET"})}function n(t){return Object(s["a"])({url:"/api/permission/socials?userId="+t,method:"GET"})}function r(t){return Object(s["a"])({url:"/api/permission/socials/render/".concat(t),method:"GET"})}function o(t,e){return Object(s["a"])({url:"/api/permission/socials/".concat(e,"?userId=").concat(t),method:"DELETE"})}},"1b45":function(t,e,a){},"2b52":function(t,e,a){"use strict";a("1b45")},3239:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"app-container Profile-container"},[e("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:t.userLoading,expression:"userLoading"}],staticClass:"profile-tabs",staticStyle:{height:"100%"},attrs:{"tab-position":"left"},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[e("el-tab-pane",{attrs:{label:"个人资料",name:"user"}},[t.visible.user?e("UserInfo",{ref:"user",attrs:{user:t.user},on:{updateInfo:t.getInfo}}):t._e()],1),e("el-tab-pane",{attrs:{label:"修改密码",name:"password"}},[t.visible.password?e("Password",{ref:"password"}):t._e()],1),e("el-tab-pane",{attrs:{disabled:"",name:"line"}}),e("el-tab-pane",{attrs:{label:"我的组织",name:"organize"}},[e("div",{staticClass:"JNPF-common-title mb-10"},[e("h2",{staticClass:"bold"},[t._v("我的组织 "),e("el-tooltip",{attrs:{content:"用户可以自行切换组织信息，我的组织默认只能进行单选",placement:"right"}},[e("a",{staticClass:"tooltip-question el-icon-question"})])],1)]),e("div",{staticClass:"organize-list"},[t.organizeList.length?e("el-row",{attrs:{gutter:80}},t._l(t.organizeList,(function(a,s){return e("el-col",{key:s,staticClass:"organize-item",attrs:{span:12}},[e("div",{staticClass:"organize-item-main",class:{active:t.activeOrganize===a.id},on:{click:function(e){return t.changeMajor(a.id,"Organize")}}},[e("i",{staticClass:"icon-ym icon-ym-organization"}),e("p",{staticClass:"organize-name"},[t._v(t._s(a.fullName))]),e("p",{staticClass:"btn"},[t._v("默认")]),e("div",{staticClass:"icon-checked"},[e("i",{staticClass:"el-icon-check"})])])])})),1):e("el-empty",{attrs:{description:"暂无数据","image-size":120}})],1)]),e("el-tab-pane",{attrs:{label:"我的岗位",name:"position"}},[e("div",{staticClass:"JNPF-common-title mb-10"},[e("h2",{staticClass:"bold"},[t._v("我的岗位 "),e("el-tooltip",{attrs:{content:"用户可以自行切换我的组织内的岗位信息，我的岗位默认只能进行单选",placement:"right"}},[e("a",{staticClass:"el-icon-question tooltip-question"})])],1)]),e("div",{staticClass:"organize-list"},[t.positionList.length?e("el-row",{attrs:{gutter:80}},t._l(t.positionList,(function(a,s){return e("el-col",{key:s,staticClass:"organize-item",attrs:{span:12}},[e("div",{staticClass:"organize-item-main",class:{active:t.activePosition===a.id},on:{click:function(e){return t.changeMajor(a.id,"Position")}}},[e("i",{staticClass:"icon-ym icon-ym-wf-outgoingApply"}),e("p",{staticClass:"organize-name"},[t._v(t._s(a.fullName))]),e("p",{staticClass:"btn"},[t._v("主岗")]),e("div",{staticClass:"icon-checked"},[e("i",{staticClass:"el-icon-check"})])])])})),1):e("el-empty",{attrs:{description:"暂无数据","image-size":120}})],1)]),e("el-tab-pane",{attrs:{label:"我的下属",name:"subordinate"}},[e("div",{staticClass:"JNPF-common-title mb-10"},[e("h2",{staticClass:"bold"},[t._v("我的下属")])]),e("div",{staticClass:"subordinate-list"},[e("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"JNPF-common-el-tree subordinate-tree",attrs:{data:t.treeData,props:t.props,"check-on-click-node":"","node-key":"id",lazy:"",load:t.loadNode},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.data;return e("el-card",{staticClass:"subordinate-tree-node",attrs:{shadow:"never"}},[e("el-avatar",{attrs:{size:50,src:t.define.comUrl+s.avatar}}),e("div",{staticClass:"text"},[e("p",[t._v(t._s(s.userName))]),e("p",{staticClass:"user-text"},[t._v(t._s(s.department)+t._s(s.position?"/"+s.position:""))])])],1)}}])})],1)]),t.useSocials?e("el-tab-pane",{attrs:{label:"绑定设置",name:"justAuth"}},[t.visible.justAuth?e("JustAuth",{ref:"justAuth"}):t._e()],1):t._e(),e("el-tab-pane",{staticClass:"el-tab-pane-authorize",attrs:{label:"系统权限",name:"authorize"}},[t.visible.authorize?e("Authorize",{ref:"authorize"}):t._e()],1),e("el-tab-pane",{attrs:{label:"系统日志",name:"sysLog"}},[t.visible.sysLog?e("SysLog",{ref:"sysLog"}):t._e()],1)],1),e("div",{staticClass:"head"},[e("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.define.comUploadUrl+"/userAvatar",headers:t.uploadHeaders,"on-success":t.handleSuccess,"show-file-list":!1,accept:"image/*"}},[e("div",{staticClass:"avatar-box"},[t.user.avatar?e("el-avatar",{staticClass:"avatar",attrs:{size:50,src:t.define.comUrl+t.user.avatar}}):t._e(),e("div",{staticClass:"avatar-hover"},[t._v("更换头像")])],1)]),e("span",{staticClass:"username"},[t._v(t._s(t.user.realName))])],1)],1)},i=[],n=(a("b64b"),a("b0c0"),a("4de4"),a("d3b7"),a("1e85")),r=a("933c"),o=a("6110"),l=a("5fbb"),c=a("6a12"),u=a("5a0d"),d={name:"profile",components:{UserInfo:r["default"],Password:o["default"],Authorize:l["default"],SysLog:c["default"],JustAuth:u["default"]},data:function(){return{user:{},treeData:[],activeTab:"",organizeList:[],positionList:[],activeOrganize:"",activePosition:"",visible:{user:!0,password:!1,theme:!1,authorize:!1,sysLog:!1,justAuth:!1},props:{children:"children",label:"userName",isLeaf:"isLeaf"},loading:!1,userLoading:!1,nodeId:"0",uploadHeaders:{Authorization:this.$store.getters.token}}},watch:{$route:"getInfo",activeTab:function(t){for(var e=0,a=Object.keys(this.visible);e<a.length;e++){var s=a[e];this.visible[s]=!1}if(this.visible[t]=!0,"subordinate"===t)return this.nodeId="0",void this.getSubordinate();"organize"!==t?"position"!==t||this.getUserPositions():this.getUserOrganizes()}},created:function(){this.getInfo()},computed:{useSocials:function(){return localStorage.getItem("useSocials")&&"0"!=localStorage.getItem("useSocials")}},methods:{getInfo:function(){var t=this;this.userLoading=!0,Object(n["h"])().then((function(e){t.user=e.data,t.activeTab="user",t.userLoading=!1;var a=t.$router.history.current.query.flag;"1"==a&&(t.activeTab="justAuth")}))},getSubordinate:function(){var t=this;this.loading=!0,Object(n["l"])(this.nodeId).then((function(e){t.treeData=e.data,t.loading=!1}))},loadNode:function(t,e){if(0===t.level)return this.nodeId="0",e(this.treeData);this.nodeId=t.data.id,Object(n["l"])(this.nodeId).then((function(t){e(t.data)}))},handleSuccess:function(t,e){200==t.code?this.updateAvatar(t.data):this.$message({message:"上传失败",type:"error",duration:1e3})},updateAvatar:function(t){var e=this;Object(n["c"])(t.name).then((function(a){e.user.avatar=t.url,e.$store.commit("user/SET_USERINFO_HEADICON",t.url),e.$message({message:a.msg,type:"success",duration:1e3})}))},getUserOrganizes:function(){var t=this;Object(n["m"])().then((function(e){t.organizeList=e.data||[];var a=t.organizeList.filter((function(t){return t.isDefault}));if(!a.length)return t.activeOrganize="";var s=a[0];t.activeOrganize=s.id}))},getUserPositions:function(){var t=this;Object(n["n"])().then((function(e){t.positionList=e.data||[];var a=t.positionList.filter((function(t){return t.isDefault}));if(!a.length)return t.activePosition="";var s=a[0];t.activePosition=s.id}))},changeMajor:function(t,e){var a=this;if(this["active"+e]!==t){var s={majorId:t,majorType:e};Object(n["o"])(s).then((function(s){a["active"+e]=t,a.$message({message:s.msg,type:"success",duration:1500,onClose:function(){location.reload()}})}))}}}},m=d,f=(a("b05e"),a("2877")),p=Object(f["a"])(m,s,i,!1,null,"33a56b30",null);e["default"]=p.exports},"382d":function(t,e,a){},"5a0d":function(t,e,a){"use strict";a.r(e);a("b0c0");var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"justAuth"},[t._m(0),e("el-col",{staticClass:"mt-20",attrs:{span:22,offset:1}},[t._l(t.socialsList,(function(a,s){return[e("el-row",{key:s},[e("el-col",{staticClass:"col-img",attrs:{span:1}},[a.enname?e("img",{staticClass:"row-img",attrs:{src:a.logo,alt:""}}):t._e(),a.enname?t._e():e("img",{staticClass:"row-img",attrs:{src:"",alt:""}})]),e("el-col",{attrs:{span:21}},[e("div",{staticClass:"tag-group-div"},[e("span",{staticClass:"tag-group-span"},[t._v(t._s(a.name))]),a.entity?e("el-tag",{attrs:{type:"success",effect:"dark"}},[t._v(" 已绑定 ")]):t._e(),a.entity?t._e():e("el-tag",{attrs:{type:"warning",effect:"dark"}},[t._v(" 未绑定 ")])],1),e("div",{staticClass:"tag-group-con"},[e("span",[t._v(t._s(a.describetion))])])]),e("el-col",{staticClass:"col-line-height",attrs:{span:1}},[a.entity?e("el-button",{attrs:{size:"small",type:""},on:{click:function(e){return t.deleteSocials(a.entity.userId,a.entity.id)}}},[t._v("解绑")]):t._e(),a.entity?t._e():e("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.binding(a.enname)}}},[t._v("绑定")])],1)],1),e("el-divider",{key:s,staticClass:"divider-margin"})]}))],2)],1)},i=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"JNPF-common-title mb-20"},[e("h2",{staticClass:"bold"},[t._v("第三方服务绑定")])])}],n=(a("ac1f"),a("5319"),a("19ac")),r={data:function(){return{socialsList:[],dialogVisible:!1,dialogSrt:"",listenerLoad:!1}},created:function(){this.init(),this.bindListener()},beforeDestroy:function(){window.removeEventListener("message",(function(){}))},methods:{init:function(){var t=this;this.loading=!0,Object(n["c"])().then((function(e){t.socialsList=e.data,t.loading=!1}))},binding:function(t){var e=this;Object(n["a"])(t).then((function(t){if(e.winURL&&!e.winURL.closed)return e.winURL.location.replace(t.msg),void e.winURL.focus();var a=750,s=500,i=(window.screen.width-a)/2,n=(window.screen.height-s)/2;e.winURL=window.open(t.msg,"_blank","height="+s+",innerHeight="+s+",width="+a+",innerWidth="+a+",top="+n+",left="+i+",toolbar=no,menubar=no,scrollbars=auto,resizeable=no,location=no,status=no")}))},bindListener:function(){var t=this;this.listenerLoad||window.addEventListener("message",(function(e){var a="string"===typeof e.data?JSON.parse(e.data):e.data;"200"==a.code&&t.$message({message:a.message,type:"success",duration:1e3,onClose:function(){t.init()}}),"201"==a.code&&t.$message({message:a.message,type:"error",duration:3e3,onClose:function(){t.init()}})})),this.listenerLoad=!0},deleteSocials:function(t,e){var a=this;this.$confirm("确定要解除该账号绑定?","提示",{type:"warning"}).then((function(){Object(n["b"])(t,e).then((function(t){a.$message({message:t.msg,type:"success",duration:1e3,onClose:function(){a.init()}})})),a.init()})).catch((function(){}))},handleClose:function(t){this.$confirm("确认关闭？").then((function(e){t()})).catch((function(t){}))},iframeLoad:function(){window.addEventListener("message",this.handleMessage)},handleMessage:function(t){console.log(t)}}},o=r,l=(a("2b52"),a("2877")),c=Object(l["a"])(o,s,i,!1,null,"00812894",null);e["default"]=c.exports},"5fbb":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"authorize"},[e("el-tabs",{staticClass:"JNPF-el_tabs",model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[e("el-tab-pane",{attrs:{label:"菜单权限",name:"module"}}),e("el-tab-pane",{attrs:{label:"按钮权限",name:"button"}}),e("el-tab-pane",{attrs:{label:"列表权限",name:"column"}}),e("el-tab-pane",{attrs:{label:"表单权限",name:"form"}}),e("el-tab-pane",{attrs:{label:"数据权限",name:"resource"}}),e("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"treeBox",staticClass:"JNPF-common-el-tree",attrs:{data:t.treeData,props:t.defaultProps,"default-expand-all":"","highlight-current":"","expand-on-click-node":!1,"node-key":"id"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.node,i=a.data;return e("span",{staticClass:"custom-tree-node"},[e("i",{class:i.icon}),e("span",{staticClass:"text"},[t._v(t._s(s.label))])])}}])})],1)],1)},i=[],n=a("1e85"),r={data:function(){return{treeData:[],info:[],activeTab:"module",defaultProps:{children:"children",label:"fullName"},loading:!1}},watch:{activeTab:function(t){this.treeData=this.info[t]}},created:function(){this.getList()},methods:{getList:function(){var t=this;this.loading=!0,Object(n["a"])().then((function(e){t.info=e.data,t.treeData=t.info[t.activeTab],t.loading=!1}))}}},o=r,l=(a("71c7"),a("2877")),c=Object(l["a"])(o,s,i,!1,null,"396f4d8a",null);e["default"]=c.exports},6110:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"password"},[t._m(0),e("el-row",[e("el-col",{attrs:{span:12}},[e("el-form",{ref:"dataForm",attrs:{model:t.dataForm,rules:t.dataRule,"label-width":"100px"}},[e("el-form-item",{attrs:{label:"旧密码",prop:"oldPassword"}},[e("el-input",{attrs:{placeholder:"旧密码","show-password":""},model:{value:t.dataForm.oldPassword,callback:function(e){t.$set(t.dataForm,"oldPassword",e)},expression:"dataForm.oldPassword"}})],1),e("el-form-item",{attrs:{label:"新密码",prop:"password"}},[e("el-input",{attrs:{placeholder:"新密码","show-password":""},model:{value:t.dataForm.password,callback:function(e){t.$set(t.dataForm,"password",e)},expression:"dataForm.password"}})],1),e("el-form-item",{attrs:{label:"重复密码",prop:"password2"}},[e("el-input",{attrs:{placeholder:"重复密码","show-password":""},model:{value:t.dataForm.password2,callback:function(e){t.$set(t.dataForm,"password2",e)},expression:"dataForm.password2"}})],1),e("el-form-item",{attrs:{label:"验证码",prop:"code"}},[e("el-col",{attrs:{span:17}},[e("el-input",{attrs:{placeholder:"验证码"},model:{value:t.dataForm.code,callback:function(e){t.$set(t.dataForm,"code",e)},expression:"dataForm.code"}})],1),e("el-col",{staticStyle:{height:"32px"},attrs:{span:6,offset:1}},[e("img",{attrs:{id:"imgcode",alt:"点击切换验证码",title:"点击切换验证码",src:t.define.comUrl+t.imgUrl},on:{click:t.changeImg}})])],1),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.dataFormSubmit()}}},[t._v("保 存")])],1)],1)],1)],1)],1)},i=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"JNPF-common-title mb-20"},[e("h2",{staticClass:"bold"},[t._v("修改密码")])])}],n=(a("d9e2"),a("ac1f"),a("00b4"),a("14d9"),a("8237")),r=a.n(n),o=a("1e85"),l=a("f888"),c={data:function(){var t=this,e=function(e,a,s){var i=/[0-9]+/,n=/[a-z]+/,r=/[A-Z]+/,o=/\W/,l=/_/;""===a?s(new Error("新密码不能为空")):1==t.baseForm.passwordStrengthLimit?(t.baseForm.passwordLengthMin&&a.length<t.baseForm.passwordLengthMinNumber&&s(new Error("新密码长度不能小于"+t.baseForm.passwordLengthMinNumber+"位")),t.baseForm.containsNumbers&&(i.test(a)||s(new Error("新密码必须包含数字"))),t.baseForm.includeLowercaseLetters&&(n.test(a)||s(new Error("新密码必须包含小写字母"))),t.baseForm.includeUppercaseLetters&&(r.test(a)||s(new Error("新密码必须包含大写字母"))),t.baseForm.containsCharacters&&(o.test(a)||l.test(a)||s(new Error("新密码必须包含字符"))),""!==t.dataForm.password2&&t.$refs.dataForm.validateField("password2"),s()):(""!==t.dataForm.password2&&t.$refs.dataForm.validateField("password2"),s())},a=function(e,a,s){a!==t.dataForm.password?s(new Error("两次密码输入不一致")):s()};return{listLoading:!1,dataForm:{oldPassword:"",password:"",password2:"",code:""},baseForm:{passwordStrengthLimit:0,passwordLengthMin:!1,passwordLengthMinNumber:0,containsNumbers:!1,includeLowercaseLetters:!1,includeUppercaseLetters:!1,containsCharacters:!1},imgUrl:"",timestamp:"",dataRule:{oldPassword:[{required:!0,message:"旧密码不能为空",trigger:"blur"}],password:[{required:!0,validator:e,trigger:"blur"}],password2:[{required:!0,message:"重复密码不能为空",trigger:"blur"},{validator:a,trigger:"blur"}],code:[{required:!0,message:"验证码不能为空",trigger:"blur"}]}}},created:function(){this.changeImg(),this.initData()},methods:{initData:function(){var t=this;this.listLoading=!0,this.$nextTick((function(){Object(l["c"])().then((function(e){t.baseForm=e.data,t.baseForm.passwordLengthMin=!!t.baseForm.passwordLengthMin,t.baseForm.containsNumbers=!!t.baseForm.containsNumbers,t.baseForm.includeLowercaseLetters=!!t.baseForm.includeLowercaseLetters,t.baseForm.includeUppercaseLetters=!!t.baseForm.includeUppercaseLetters,t.baseForm.containsCharacters=!!t.baseForm.containsCharacters,t.listLoading=!1})).catch((function(){t.listLoading=!1}))}))},dataFormSubmit:function(){var t=this;this.$refs["dataForm"].validate((function(e){if(e){var a={oldPassword:r()(t.dataForm.oldPassword),password:r()(t.dataForm.password),code:t.dataForm.code,timestamp:t.timestamp};Object(o["e"])(a).then((function(e){t.$message({message:e.msg,type:"success",duration:1500,onClose:function(){t.$store.dispatch("user/resetToken").then((function(){t.$router.push("/login")}))}})})).catch((function(){t.changeImg()}))}}))},changeImg:function(){var t=Math.random();this.timestamp=t,this.imgUrl="/api/file/ImageCode/".concat(t)}}},u=c,d=(a("8781"),a("2877")),m=Object(d["a"])(u,s,i,!1,null,"25435742",null);e["default"]=m.exports},"6a12":function(t,e,a){"use strict";a.r(e);a("ac1f"),a("841c");var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"sysLog JNPF-flex-main"},[e("el-row",{staticClass:"JNPF-common-search-box",attrs:{gutter:16}},[e("el-form",{nativeOn:{submit:function(t){t.preventDefault()}}},[e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"关键词"}},[e("el-input",{attrs:{placeholder:"请输入关键词查询",clearable:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search()}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1)],1),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"时间"}},[e("el-date-picker",{attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions,"value-format":"timestamp",editable:!1,clearable:""},model:{value:t.pickerVal,callback:function(e){t.pickerVal=e},expression:"pickerVal"}})],1)],1),e("el-col",{attrs:{span:6}},[e("el-form-item",[e("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(e){return t.search()}}},[t._v(" "+t._s(t.$t("common.search")))]),e("el-button",{attrs:{icon:"el-icon-refresh-right"},on:{click:function(e){return t.reset()}}},[t._v(t._s(t.$t("common.reset"))+" ")])],1)],1)],1)],1),e("el-tabs",{staticClass:"JNPF-el_tabs",on:{"tab-click":t.handleTabClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:"登录日志",name:"1"}},[e("JNPF-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.loginLogData,"tooltip-effect":"dark"}},[e("el-table-column",{attrs:{prop:"creatorTime",label:"登录时间",formatter:t.jnpf.tableDateFormat,width:"120"}}),e("el-table-column",{attrs:{prop:"userName",label:"登录用户",width:"120"}}),e("el-table-column",{attrs:{prop:"ipaddress",label:"登录IP",width:"120"}}),e("el-table-column",{attrs:{prop:"platForm",label:"登录设备","show-overflow-tooltip":""}})],1)],1),e("el-tab-pane",{attrs:{label:"请求日志",name:"5"}},[e("JNPF-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.requestLogData,"tooltip-effect":"dark"}},[e("el-table-column",{attrs:{prop:"creatorTime",label:"请求时间",formatter:t.jnpf.tableDateFormat,width:"120"}}),e("el-table-column",{attrs:{prop:"userName",label:"请求用户",width:"120"}}),e("el-table-column",{attrs:{prop:"ipaddress",label:"请求IP",width:"120"}}),e("el-table-column",{attrs:{prop:"platForm",label:"请求设备","min-width":"200","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"requestURL",label:"请求地址","min-width":"200","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"requestMethod",label:"请求类型",width:"80",align:"center"}}),e("el-table-column",{attrs:{prop:"requestDuration",label:"耗时(毫秒)",width:"80"}})],1)],1),e("pagination",{attrs:{total:t.total,page:t.listQuery.currentPage,limit:t.listQuery.pageSize},on:{"update:page":function(e){return t.$set(t.listQuery,"currentPage",e)},"update:limit":function(e){return t.$set(t.listQuery,"pageSize",e)},pagination:t.initData}})],1)],1)},i=[],n=a("5530"),r=a("1e85"),o={name:"sysLog",data:function(){return{keyword:"",startTime:"",endTime:"",activeName:"1",loginLogData:[],requestLogData:[],total:0,listLoading:!0,listQuery:{currentPage:1,pageSize:20,sort:"desc"},pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}}]},pickerVal:[]}},created:function(){this.initData()},methods:{initData:function(){var t=this,e=this.activeName;this.listLoading=!0;var a=Object(n["a"])(Object(n["a"])({},this.listQuery),{},{keyword:this.keyword,startTime:this.startTime,endTime:this.endTime,category:e});Object(r["b"])(a).then((function(a){1==e&&(t.loginLogData=a.data.list),5==e&&(t.requestLogData=a.data.list),t.total=a.data.pagination.total,t.listLoading=!1}))},handleTabClick:function(t){this.reset()},search:function(){this.pickerVal&&this.pickerVal.length?(this.startTime=this.pickerVal[0],this.endTime=this.pickerVal[1]):(this.startTime="",this.endTime=""),this.listQuery={currentPage:1,pageSize:20,sort:"desc"},this.initData()},reset:function(){this.keyword="",this.list=[],this.pickerVal=[],this.startTime="",this.endTime="",this.listQuery={currentPage:1,pageSize:20,sort:"desc"},this.initData()}}},l=o,c=(a("d8d1"),a("2877")),u=Object(c["a"])(l,s,i,!1,null,"504be669",null);e["default"]=u.exports},"71c7":function(t,e,a){"use strict";a("7cf5")},7322:function(t,e,a){},"7cf5":function(t,e,a){},8781:function(t,e,a){"use strict";a("facd")},"8f54":function(t,e,a){"use strict";a("7322")},"933c":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"userInfo"},[e("el-tabs",{staticClass:"JNPF-el_tabs"},[e("el-tab-pane",{attrs:{label:"账户信息"}},[e("el-col",{attrs:{span:12}},[e("el-form",{attrs:{model:t.form,"label-width":"100px"}},[e("el-form-item",{attrs:{label:"账户"}},[e("el-input",{attrs:{readonly:""},model:{value:t.form.account,callback:function(e){t.$set(t.form,"account",e)},expression:"form.account"}})],1),e("el-form-item",{attrs:{label:"所属组织"}},[e("el-input",{attrs:{readonly:""},model:{value:t.form.organize,callback:function(e){t.$set(t.form,"organize",e)},expression:"form.organize"}})],1),e("el-form-item",{attrs:{label:"直属主管"}},[e("el-input",{attrs:{readonly:""},model:{value:t.form.manager,callback:function(e){t.$set(t.form,"manager",e)},expression:"form.manager"}})],1),e("el-form-item",{attrs:{label:"岗位"}},[e("el-input",{attrs:{readonly:""},model:{value:t.form.position,callback:function(e){t.$set(t.form,"position",e)},expression:"form.position"}})],1),e("el-form-item",{attrs:{label:"角色"}},[e("el-input",{attrs:{readonly:""},model:{value:t.form.roleId,callback:function(e){t.$set(t.form,"roleId",e)},expression:"form.roleId"}})],1),e("el-form-item",{attrs:{label:"注册时间"}},[e("el-input",{attrs:{readonly:""},model:{value:t.creatorTime,callback:function(e){t.creatorTime=e},expression:"creatorTime"}})],1),e("el-form-item",{attrs:{label:"上次登录"}},[e("el-input",{attrs:{readonly:""},model:{value:t.prevLogTime,callback:function(e){t.prevLogTime=e},expression:"prevLogTime"}})],1),e("el-form-item",{attrs:{label:"入职日期"}},[e("el-input",{attrs:{readonly:""},model:{value:t.entryDate,callback:function(e){t.entryDate=e},expression:"entryDate"}})],1)],1)],1)],1),e("el-tab-pane",{attrs:{label:"个人资料"}},[e("el-form",{ref:"dataForm",attrs:{model:t.form2,rules:t.form2Rule,"label-width":"100px"}},[e("el-row",[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"姓名",prop:"realName"}},[e("el-input",{model:{value:t.form2.realName,callback:function(e){t.$set(t.form2,"realName",e)},expression:"form2.realName"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"性别"}},[e("el-select",{attrs:{placeholder:"选择性别"},model:{value:t.form2.gender,callback:function(e){t.$set(t.form2,"gender",e)},expression:"form2.gender"}},t._l(t.genderOptions,(function(t){return e("el-option",{key:t.enCode,attrs:{label:t.fullName,value:t.enCode}})})),1)],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"民族"}},[e("el-select",{attrs:{placeholder:"选择民族",filterable:""},model:{value:t.form2.nation,callback:function(e){t.$set(t.form2,"nation",e)},expression:"form2.nation"}},t._l(t.nationOptions,(function(t){return e("el-option",{key:t.id,attrs:{label:t.fullName,value:t.id}})})),1)],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"籍贯"}},[e("el-input",{model:{value:t.form2.nativePlace,callback:function(e){t.$set(t.form2,"nativePlace",e)},expression:"form2.nativePlace"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"证件类型"}},[e("el-select",{attrs:{placeholder:"请选择类型",filterable:""},model:{value:t.form2.certificatesType,callback:function(e){t.$set(t.form2,"certificatesType",e)},expression:"form2.certificatesType"}},t._l(t.certificatesTypeOptions,(function(t){return e("el-option",{key:t.id,attrs:{label:t.fullName,value:t.id}})})),1)],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"证件号码"}},[e("el-input",{model:{value:t.form2.certificatesNumber,callback:function(e){t.$set(t.form2,"certificatesNumber",e)},expression:"form2.certificatesNumber"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"文化程度"}},[e("el-select",{attrs:{placeholder:"请选择学历",filterable:""},model:{value:t.form2.education,callback:function(e){t.$set(t.form2,"education",e)},expression:"form2.education"}},t._l(t.educationOptions,(function(t){return e("el-option",{key:t.id,attrs:{label:t.fullName,value:t.id}})})),1)],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"出生年月"}},[e("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"timestamp",format:"yyyy-MM-dd"},model:{value:t.form2.birthday,callback:function(e){t.$set(t.form2,"birthday",e)},expression:"form2.birthday"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"办公电话"}},[e("el-input",{model:{value:t.form2.telePhone,callback:function(e){t.$set(t.form2,"telePhone",e)},expression:"form2.telePhone"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"办公座机"}},[e("el-input",{model:{value:t.form2.landline,callback:function(e){t.$set(t.form2,"landline",e)},expression:"form2.landline"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"手机号码"}},[e("el-input",{model:{value:t.form2.mobilePhone,callback:function(e){t.$set(t.form2,"mobilePhone",e)},expression:"form2.mobilePhone"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"电子邮箱"}},[e("el-input",{model:{value:t.form2.email,callback:function(e){t.$set(t.form2,"email",e)},expression:"form2.email"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"紧急联系"}},[e("el-input",{model:{value:t.form2.urgentContacts,callback:function(e){t.$set(t.form2,"urgentContacts",e)},expression:"form2.urgentContacts"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"紧急电话"}},[e("el-input",{model:{value:t.form2.urgentTelePhone,callback:function(e){t.$set(t.form2,"urgentTelePhone",e)},expression:"form2.urgentTelePhone"}})],1)],1),e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"通讯地址"}},[e("el-input",{model:{value:t.form2.postalAddress,callback:function(e){t.$set(t.form2,"postalAddress",e)},expression:"form2.postalAddress"}})],1)],1),e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"自我介绍"}},[e("el-input",{attrs:{type:"textarea",rows:3},model:{value:t.form2.signature,callback:function(e){t.$set(t.form2,"signature",e)},expression:"form2.signature"}})],1)],1),e("el-col",{attrs:{span:24}},[e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.dataFormSubmit()}}},[t._v("保 存")])],1)],1)],1)],1)],1),e("el-tab-pane",{attrs:{label:"个人签名"}},[e("el-row",{staticClass:"sign",attrs:{gutter:40}},[e("div",{staticStyle:{cursor:"pointer"},on:{click:t.addSign}},[e("el-col",{staticClass:"sign-item",attrs:{span:6}},[e("div",{staticClass:"add-sign"},[e("i",{staticClass:"add-icon el-icon-plus"})])])],1),t._l(t.signList,(function(a,s){return[e("el-col",{key:s,staticClass:"sign-item",attrs:{span:6}},[e("div",{class:a.isDefault?"add-sign active":"add-sign"},[e("img",{staticClass:"sign-img",attrs:{src:a.signImg,alt:""}}),a.isDefault?e("div",{staticClass:"icon-checked1"},[e("i",{staticClass:"el-icon-check"})]):t._e(),a.isDefault?t._e():e("div",{staticClass:"add-button"},[e("el-button",{on:{click:function(e){return t.deleteSign(a.id)}}},[t._v("删除")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.updateDefault(a.id,a.signImg)}}},[t._v("设为默认 ")])],1)])])]}))],2)],1)],1),t.signVisible?e("SignImgDialog",{ref:"SignImg",attrs:{lineWidth:3,userInfo:t.userInfo,isDefault:0},on:{close:t.closeDialog}}):t._e()],1)},i=[],n=a("5530"),r=(a("e9c4"),a("b64b"),a("1e85")),o=a("5880"),l=a("a84c"),c={components:{SignImgDialog:l["default"]},props:{user:{type:Object,default:function(){return{}}}},data:function(){return{form:{},form2:{realName:"",signature:"",gender:1,nation:"",nativePlace:"",certificatesType:"",certificatesNumber:"",education:"",birthday:null,telePhone:"",landline:"",mobilePhone:"",email:"",urgentContacts:"",urgentTelePhone:"",postalAddress:""},form2Rule:{realName:[{required:!0,message:"姓名不能为空",trigger:"blur"}]},certificatesTypeOptions:[],educationOptions:[],genderOptions:[],nationOptions:[],signVisible:!1,signImg:"",signList:[]}},computed:Object(n["a"])({creatorTime:function(){return this.jnpf.toDate(this.form.creatorTime)},entryDate:function(){return this.jnpf.toDate(this.form.entryDate)},prevLogTime:function(){return this.jnpf.toDate(this.form.prevLogTime)}},Object(o["mapGetters"])(["userInfo"])),created:function(){this.getOptions(),this.getInfo(),this.getSign()},methods:{closeDialog:function(){this.signVisible=!1,this.getSign()},getSign:function(){var t=this;Object(r["k"])().then((function(e){t.signList=e.data||[]}))},deleteSign:function(t){var e=this;Object(r["j"])(t).then((function(t){e.$message({message:t.msg,type:"success",duration:1500}),e.getSign()}))},updateDefault:function(t,e){var a=this;Object(r["p"])(t).then((function(t){a.$message({message:t.msg,type:"success",duration:1500}),a.$store.commit("user/SET_USERINFO_SIGNIMG",e),a.getSign()})).catch((function(t){a.getSign()}))},addSign:function(){var t=this;this.signVisible=!0,this.$nextTick((function(){t.$refs.SignImg.init()}))},getOptions:function(){var t=this;this.$store.dispatch("base/getDictionaryData",{sort:"Education"}).then((function(e){t.educationOptions=JSON.parse(JSON.stringify(e)),t.$store.dispatch("base/getDictionaryData",{sort:"certificateType"}).then((function(e){t.certificatesTypeOptions=JSON.parse(JSON.stringify(e))})),t.$store.dispatch("base/getDictionaryData",{sort:"sex"}).then((function(e){t.genderOptions=JSON.parse(JSON.stringify(e))})),t.$store.dispatch("base/getDictionaryData",{sort:"Nation"}).then((function(e){t.nationOptions=JSON.parse(JSON.stringify(e))}))}))},getInfo:function(){this.form=this.user;for(var t=0,e=Object.keys(this.form2);t<e.length;t++){var a=e[t];this.form2[a]=this.form[a]}},dataFormSubmit:function(){var t=this;this.$refs["dataForm"].validate((function(e){e&&Object(r["g"])(t.form2).then((function(e){t.$message({message:e.msg,type:"success",duration:1500}),t.$emit("updateInfo"),t.$store.commit("user/SET_USERINFO_USERNAME",t.form2.realName)}))}))}}},u=c,d=(a("8f54"),a("2877")),m=Object(d["a"])(u,s,i,!1,null,"25d5d082",null);e["default"]=m.exports},b05e:function(t,e,a){"use strict";a("c1f7")},c1f7:function(t,e,a){},d8d1:function(t,e,a){"use strict";a("382d")},facd:function(t,e,a){}}]);
//# sourceMappingURL=index.umd.min.7.js.map