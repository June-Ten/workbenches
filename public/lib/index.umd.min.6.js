(("undefined"!==typeof self?self:this)["webpackJsonpavueData"]=("undefined"!==typeof self?self:this)["webpackJsonpavueData"]||[]).push([[6,22],{"108b":function(t,e,i){},"13bf":function(t,e,i){"use strict";var n=function(){var t=this,e=t._self._c;return e("canvas",{ref:"canvas",on:{mousedown:t.mouseDown,mousemove:t.mouseMove,mouseup:t.mouseUp,touchstart:t.touchStart,touchmove:t.touchMove,touchend:t.touchEnd}})},o=[],r=i("2909"),a=(i("a9e3"),i("14d9"),i("d3b7"),i("e6cf"),{props:{width:{type:Number,default:800},height:{type:Number,default:300},lineWidth:{type:Number,default:4},lineColor:{type:String,default:"#000000"},bgColor:{type:String,default:""},isCrop:{type:Boolean,default:!1},isClearBgColor:{type:Boolean,default:!0},format:{type:String,default:"image/png"},quality:{type:Number,default:1}},data:function(){return{hasDrew:!1,resultImg:"",points:[],canvasTxt:null,startX:0,startY:0,isDrawing:!1,sratio:1}},computed:{ratio:function(){return this.height/this.width},stageInfo:function(){return this.$refs.canvas.getBoundingClientRect()},myBg:function(){return this.bgColor?this.bgColor:"rgba(255, 255, 255, 0)"}},watch:{myBg:function(t){this.$refs.canvas.style.background=t}},beforeMount:function(){window.addEventListener("resize",this.$_resizeHandler)},beforeDestroy:function(){window.removeEventListener("resize",this.$_resizeHandler)},mounted:function(){var t=this,e=this.$refs.canvas;e.height=this.height,e.width=this.width,e.style.background=this.myBg,this.$_resizeHandler(),document.onmouseup=function(){t.isDrawing=!1}},methods:{$_resizeHandler:function(){var t=this.$refs.canvas;t.style.width=this.width+"px";var e=parseFloat(window.getComputedStyle(t).width);t.style.height=this.ratio*e+"px",this.canvasTxt=t.getContext("2d"),this.canvasTxt.scale(1*this.sratio,1*this.sratio),this.sratio=e/this.width,this.canvasTxt.scale(1/this.sratio,1/this.sratio)},mouseDown:function(t){t=t||event,t.preventDefault(),this.isDrawing=!0,this.hasDrew=!0;var e={x:t.offsetX,y:t.offsetY};this.drawStart(e)},mouseMove:function(t){if(t=t||event,t.preventDefault(),this.isDrawing){var e={x:t.offsetX,y:t.offsetY};this.drawMove(e)}},mouseUp:function(t){t=t||event,t.preventDefault();var e={x:t.offsetX,y:t.offsetY};this.drawEnd(e),this.isDrawing=!1},touchStart:function(t){if(t=t||event,t.preventDefault(),this.hasDrew=!0,1===t.touches.length){var e={x:t.targetTouches[0].clientX-this.$refs.canvas.getBoundingClientRect().left,y:t.targetTouches[0].clientY-this.$refs.canvas.getBoundingClientRect().top};this.drawStart(e)}},touchMove:function(t){if(t=t||event,t.preventDefault(),1===t.touches.length){var e={x:t.targetTouches[0].clientX-this.$refs.canvas.getBoundingClientRect().left,y:t.targetTouches[0].clientY-this.$refs.canvas.getBoundingClientRect().top};this.drawMove(e)}},touchEnd:function(t){if(t=t||event,t.preventDefault(),1===t.touches.length){var e={x:t.targetTouches[0].clientX-this.$refs.canvas.getBoundingClientRect().left,y:t.targetTouches[0].clientY-this.$refs.canvas.getBoundingClientRect().top};this.drawEnd(e)}},drawStart:function(t){this.startX=t.x,this.startY=t.y,this.canvasTxt.beginPath(),this.canvasTxt.moveTo(this.startX,this.startY),this.canvasTxt.lineTo(t.x,t.y),this.canvasTxt.lineCap="round",this.canvasTxt.lineJoin="round",this.canvasTxt.lineWidth=this.lineWidth*this.sratio,this.canvasTxt.stroke(),this.canvasTxt.closePath(),this.points.push(t)},drawMove:function(t){this.canvasTxt.beginPath(),this.canvasTxt.moveTo(this.startX,this.startY),this.canvasTxt.lineTo(t.x,t.y),this.canvasTxt.strokeStyle=this.lineColor,this.canvasTxt.lineWidth=this.lineWidth*this.sratio,this.canvasTxt.lineCap="round",this.canvasTxt.lineJoin="round",this.canvasTxt.stroke(),this.canvasTxt.closePath(),this.startY=t.y,this.startX=t.x,this.points.push(t)},drawEnd:function(t){this.canvasTxt.beginPath(),this.canvasTxt.moveTo(this.startX,this.startY),this.canvasTxt.lineTo(t.x,t.y),this.canvasTxt.lineCap="round",this.canvasTxt.lineJoin="round",this.canvasTxt.stroke(),this.canvasTxt.closePath(),this.points.push(t),this.points.push({x:-1,y:-1})},generate:function(t){var e=this,i=t&&t.format?t.format:this.format,n=t&&t.quality?t.quality:this.quality,o=new Promise((function(t,o){if(e.hasDrew){var a=e.canvasTxt.getImageData(0,0,e.$refs.canvas.width,e.$refs.canvas.height);e.canvasTxt.globalCompositeOperation="destination-over",e.canvasTxt.fillStyle=e.myBg,e.canvasTxt.fillRect(0,0,e.$refs.canvas.width,e.$refs.canvas.height),e.resultImg=e.$refs.canvas.toDataURL(i,n);var s=e.resultImg;if(e.canvasTxt.clearRect(0,0,e.$refs.canvas.width,e.$refs.canvas.height),e.canvasTxt.putImageData(a,0,0),e.canvasTxt.globalCompositeOperation="source-over",e.isCrop){var c,d=e.getCropArea(a.data),l=document.createElement("canvas"),u=l.getContext("2d");l.width=d[2]-d[0],l.height=d[3]-d[1];var f=(c=e.canvasTxt).getImageData.apply(c,Object(r["a"])(d));u.globalCompositeOperation="destination-over",u.putImageData(f,0,0),u.fillStyle=e.myBg,u.fillRect(0,0,l.width,l.height),s=l.toDataURL(i,n),l=null}t(s)}else o("Warning: Not Signned!")}));return o},reset:function(){this.canvasTxt.clearRect(0,0,this.$refs.canvas.width,this.$refs.canvas.height),this.isClearBgColor&&(this.$emit("update:bgColor",""),this.$refs.canvas.style.background="rgba(255, 255, 255, 0)"),this.points=[],this.hasDrew=!1,this.resultImg=""},getCropArea:function(t){for(var e=this.$refs.canvas.width,i=0,n=this.$refs.canvas.height,o=0,r=0;r<this.$refs.canvas.width;r++)for(var a=0;a<this.$refs.canvas.height;a++){var s=4*(r+this.$refs.canvas.width*a);(t[s]>0||t[s+1]>0||t[s+2]||t[s+3]>0)&&(o=Math.max(a,o),i=Math.max(r,i),n=Math.min(a,n),e=Math.min(r,e))}e++,i++,n++,o++;var c=[e,n,i,o];return c}}}),s=a,c=(i("91fa"),i("2877")),d=Object(c["a"])(s,n,o,!1,null,"a1968bcc",null),l=d.exports;l.install=function(t){this.installed||(this.installed=!0,t.component("vueEsign",l))};e["a"]=l},"1d93":function(t,e,i){},"2e29":function(t,e,i){"use strict";i.r(e),i.d(e,"NodeUtils",(function(){return c})),i.d(e,"getMockData",(function(){return d}));var n=i("b85c"),o=i("d4ec"),r=i("bee2"),a=(i("14d9"),i("a15b"),i("e9c4"),i("d3b7"),i("159b"),i("c740"),i("a434"),i("d81d"),i("fb6a"),i("c5cd")),s=function(t){return!Array.isArray(t)||0===t.length},c=function(){function t(){Object(o["a"])(this,t)}return Object(r["a"])(t,null,[{key:"idGenerator",value:function(){var t=new Date-new Date("2020-08-01");t+=Math.ceil(1e3*Math.random());var e="0123456789ABCDEFGHIGKLMNOPQRSTUVWXYZabcdefghigklmnopqrstuvwxyz",i=e.split(""),n=e.length,o=[];do{var r=t%n;t=(t-r)/n,o.push(i[r])}while(t);return o.join("")}},{key:"isConditionNode",value:function(t){return t&&"condition"===t.type}},{key:"isCopyNode",value:function(t){return t&&"copy"===t.type}},{key:"isStartNode",value:function(t){return t&&"start"===t.type}},{key:"isApproverNode",value:function(t){return t&&"approver"===t.type}},{key:"isTimerNode",value:function(t){return t&&"timer"===t.type}},{key:"isSubFlowNode",value:function(t){return t&&"subFlow"===t.type}},{key:"isInterflowNode",value:function(t){return t&&"approver"===t.type&&t.isInterflow}},{key:"isBranchFlowNode",value:function(t){return t&&"approver"===t.type&&t.isBranchFlow}},{key:"createNode",value:function(t,e){var i=JSON.parse(JSON.stringify(a["default"][t]));return i.nodeId=this.idGenerator(),"start"!==t&&"timer"!==t&&(i.properties.title+=i.nodeId),i.prevId=e,i}},{key:"getPreviousNode",value:function(t,e){if(e.nodeId===t)return e;if(e.childNode){var i=this.getPreviousNode(t,e.childNode);if(i)return i}if(e.conditionNodes){var o,r=Object(n["a"])(e.conditionNodes);try{for(r.s();!(o=r.n()).done;){var a=o.value,s=this.getPreviousNode(t,a);if(s)return s}}catch(c){r.e(c)}finally{r.f()}}}},{key:"deleteNode",value:function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=this.getPreviousNode(t.prevId,e);if(i&&"empty"===n.type)if(this.isConditionNode(t)||this.isInterflowNode(t)||this.isBranchFlowNode(t)){var o=2===n.conditionNodes.length,r=o?n:t;this.deleteNode(r,e,o)}else s(n.conditionNodes)&&this.deleteNode(n,e),this.deleteNode(t,e,!1);else{var a=function(t,e){t.childNode=e.childNode,s(t.conditionNodes)&&(t.conditionNodes=e.conditionNodes),t.childNode&&(t.childNode.prevId=t.nodeId),t.conditionNodes&&t.conditionNodes.forEach((function(e){return e.prevId=t.nodeId}))};if(this.isConditionNode(t)||this.isInterflowNode(t)||this.isBranchFlowNode(t)){var c=n.conditionNodes,d=c.findIndex((function(e){return e.nodeId===t.nodeId}));if(c.length>2)c.splice(d,1);else{var l=c[+!d];if(delete n.conditionNodes,delete n.conditionType,n.childNode){var u=l;while(u.childNode)u=u.childNode;u.childNode=n.childNode,u.childNode.prevId=u.nodeId}a(n,l),n.childNode&&"empty"===n.childNode.type&&this.deleteNode(n.childNode,n)}c.forEach((function(t,e){return t.properties.priority=e}))}else a(n,t)}}},{key:"addApprovalNode",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=t.childNode;i=i||this.createNode("approver",t.nodeId),t.childNode=i,n&&(i.childNode=n,n.prevId=i.nodeId);var o=t.conditionNodes;Array.isArray(o)&&!e&&o.length&&(i.conditionNodes=o.map((function(t){return t.prevId=i.nodeId,t})),delete t.conditionNodes),n&&"empty"===n.type&&"empty"!==i.type&&0===n.conditionNodes.length&&this.deleteNode(n,t)}},{key:"addEmptyNode",value:function(t){var e=this.createNode("empty",t.nodeId);return this.addApprovalNode(t,!0,e),e}},{key:"addCopyNode",value:function(t,e){this.addApprovalNode(t,e,this.createNode("copy",t.nodeId))}},{key:"addTimerNode",value:function(t,e){this.addApprovalNode(t,e,this.createNode("timer",t.nodeId))}},{key:"addSubFlowNode",value:function(t,e){this.addApprovalNode(t,e,this.createNode("subFlow",t.nodeId))}},{key:"appendConditionNode",value:function(t){var e=t.conditionNodes,i=this.createNode("condition",t.nodeId),n=e.findIndex((function(t){return t.properties.isDefault}));i.properties.priority=e.length,n>-1?(e.splice(-1,0,i),i.properties.priority=e.length-2,e[e.length-1].properties.priority=e.length-1):e.push(i),this.setDefaultCondition(i,t)}},{key:"appendInterflowNode",value:function(t){var e=t.conditionNodes,i=this.createNode("interflow",t.nodeId),n=e.findIndex((function(t){return t.properties.isDefault}));i.properties.priority=e.length,n>-1?(e.splice(-1,0,i),i.properties.priority=e.length-2,e[e.length-1].properties.priority=e.length-1):e.push(i)}},{key:"appendBranchFlowNode",value:function(t){var e=t.conditionNodes,i=this.createNode("branchFlow",t.nodeId),n=e.findIndex((function(t){return t.properties.isDefault}));i.properties.priority=e.length,n>-1?(e.splice(-1,0,i),i.properties.priority=e.length-2,e[e.length-1].properties.priority=e.length-1):e.push(i)}},{key:"appendBranch",value:function(t,e){var i=t;if(Array.isArray(t.conditionNodes)&&t.conditionNodes.length)if(e)i=this.addEmptyNode(i,!0);else{var n=this.addEmptyNode(i,!0);n.conditionNodes=i.conditionNodes,n.conditionType="condition",n.conditionNodes.forEach((function(t){t.prevId=n.nodeId}))}var o=[this.createNode("condition",i.nodeId),this.createNode("condition",i.nodeId)].map((function(t,e){return t.properties.priority=e,t}));i.conditionNodes=o,i.conditionType="condition"}},{key:"appendInterflowBranch",value:function(t,e){var i=t;if(Array.isArray(t.conditionNodes)&&t.conditionNodes.length)if(e)i=this.addEmptyNode(i,!0);else{var n=this.addEmptyNode(i,!0);n.conditionNodes=i.conditionNodes,n.conditionType="interflow",n.conditionNodes.forEach((function(t){t.prevId=n.nodeId}))}var o=[this.createNode("interflow",i.nodeId),this.createNode("interflow",i.nodeId)];i.conditionNodes=o,i.conditionType="interflow"}},{key:"appendBranchFlowBranch",value:function(t,e){var i=t;if(Array.isArray(t.conditionNodes)&&t.conditionNodes.length)if(e)i=this.addEmptyNode(i,!0);else{var n=this.addEmptyNode(i,!0);n.conditionNodes=i.conditionNodes,n.conditionType="branchFlow",n.conditionNodes.forEach((function(t){t.prevId=n.nodeId}))}var o=[this.createNode("branchFlow",i.nodeId),this.createNode("branchFlow",i.nodeId)];i.conditionNodes=o,i.conditionType="branchFlow"}},{key:"resortPrioByCNode",value:function(t,e,i){if(t.properties.isDefault)t.properties.priority=e;else{var n=this.getPreviousNode(t.prevId,i),o=t.properties.priority;if(n.conditionNodes[o].properties.isDefault)t.properties.priority=e;else{var r=n.conditionNodes.splice(o,1,t)[0];r.properties.priority=e,n.conditionNodes[e]=r}}}},{key:"increasePriority",value:function(t,e){if(!t.properties.isDefault){var i=this.getPreviousNode(t.prevId,e),n=i.conditionNodes,o=n.findIndex((function(e){return e===t}));o&&(n[o-1].properties.priority=o,n[o].properties.priority=o-1,n[o-1]=n.splice(o,1,n[o-1])[0])}}},{key:"decreasePriority",value:function(t,e){var i=this.getPreviousNode(t.prevId,e),n=i.conditionNodes,o=n.findIndex((function(e){return e.nodeId===t.nodeId}));if(o<n.length-1){var r=n[o+1];if(r.properties.isDefault)return;r.properties.priority=o,n[o].properties.priority=o+1,n[o+1]=n.splice(o,1,n[o+1])[0]}}},{key:"setDefaultCondition",value:function(t,e){var i="其他情况进入此流程",n=this.getPreviousNode(t.prevId,e).conditionNodes,o=function(t){return t.properties&&(t.properties.initiator||!s(t.properties.conditions))},r=function(t){t.properties.isDefault=!1,t.content===i&&(t.content="请设置条件")},a=function(t){t.properties.isDefault=!0,t.content=i},c=0;n.slice(0,-1).forEach((function(t){o(t)&&c++,r(t)}));var d=n[n.length-1];c>0&&!o(d)?a(d):r(d)}},{key:"checkNode",value:function(t,e){var i=!0,n=t.properties;return this.isStartNode(t)&&!n.formId&&(i=!1),this.isConditionNode(t)&&!n.isDefault&&s(n.conditions)&&(i=!1),this.isSubFlowNode(t)&&(!n.flowId||6===n.initiateType&&s(n.initiator)&&s(n.initiatePos)&&s(n.initiateRole)&&s(n.initiateOrg)&&s(n.initiateGroup))&&(i=!1),this.isApproverNode(t)&&(!n.assigneeType||6===n.assigneeType)&&s(n.approvers)&&s(n.approverPos)&&s(n.approverRole)&&s(n.approverOrg)&&s(n.approverGroup)&&(i=!1),i}},{key:"checkAllNode",value:function(t){var e=this,i=!0,n=function t(i,n,o){!e.checkNode(i,o)&&n(),i.childNode&&t(i.childNode,n,o),s(i.conditionNodes)||i.conditionNodes.forEach((function(e){return t(e,n,i)}))};return n(t,(function(){return i=!1})),i}}]),t}();function d(){var t=c.createNode("start");return t.childNode=c.createNode("approver",t.nodeId),t}},3804:function(t,e,i){},"3fd4":function(t,e,i){"use strict";i.r(e);i("14d9"),i("a15b"),i("99af"),i("d81d"),i("fb6a");var n=i("2e29"),o=function(t){return"condition"===t.type||"approver"===t.type&&(t.isInterflow||t.isBranchFlow)},r=function(t){return Array.isArray(t)&&t.length>0},a=function(t){return r(t.conditionNodes)};function s(t,e,i){var o=["flow-path-card"];e.state&&o.push(e.state);var r=function(t,e){return t&&o.push(e),t},a=(r(n["NodeUtils"].isStartNode(e),"start-node"),r(n["NodeUtils"].isApproverNode(e),"approver"),r(n["NodeUtils"].isCopyNode(e),"copy"),r(n["NodeUtils"].isTimerNode(e),"timer"),r(n["NodeUtils"].isSubFlowNode(e),"subFlow"));return i("section",{class:o.join(" "),on:{click:this.eventLauncher.bind(t,"edit",e)}},[i("header",{class:"header"},[i("div",{class:"title-box",style:"height: 100%;width:190px;"},[i("span",{class:"title-text"},[e.properties.title])]),a&&i("el-tag",{class:"async-state",attrs:{size:"mini",effect:"plain"},style:"right:10px"},[e.properties.isAsync?"异步":"同步"])]),i("div",{class:"body"},[i("span",{class:"text"},[e.content])])])}var c=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return s.call.apply(s,[e[0]].concat(e))},d={start:c,approver:c,copy:c,timer:c,subFlow:c,interflow:c,branchFlow:c,empty:function(t){return""},condition:function(t,e,i){return i("section",{class:"flow-path-card condition"},[i("header",{class:"header"},[i("div",{class:"title-box",style:"height: 20px;width:160px;"},[i("span",{class:"title-text"},[e.properties.title])])]),i("div",{class:"body"},[i("div",{class:"text"},[e.content])])])}};function l(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=(a(e),"empty"===e.type);return o&&!n?"":i("div",{class:"add-node-btn-box flex justify-center"})}function u(t,e,i){if(e){var r=t.verifyMode&&!1===n["NodeUtils"].checkNode(e),s=[],c="",f=i("div",{class:"node-wrap"},[i("div",{class:"node-wrap-box ".concat(e.type," ").concat(n["NodeUtils"].isInterflowNode(e)?"interflow":""," ").concat(n["NodeUtils"].isBranchFlowNode(e)?"branchFlow":""," ").concat(r?"error":"")},[d[e.type].call(t,t,e,i),l.call(t,t,e,i)])]);return a(e)&&(c=i("div",{class:"branch-wrap"},[i("div",{class:"branch-box-wrap"},[i("div",{class:"branch-box flex justify-center relative"},[i("span",{class:"line"}),e.conditionNodes.map((function(e){return u.call(t,t,e,i)}))])]),l.call(t,t,e,i,!0)])),o(e)?i("div",{class:"col-box"},[i("div",{class:"center-line"}),i("div",{class:"top-cover-line"}),i("div",{class:"bottom-cover-line"}),f,c,u.call(t,t,e.childNode,i)]):(s.push(f),c&&s.push(c),e.childNode&&s.push(u.call(t,t,e.childNode,i)),s)}}function f(t){return t("section",{class:"end-node"},["流程结束"])}var h,p,v={props:{data:{type:Object,required:!0},verifyMode:{type:Boolean,default:!0}},watch:{},methods:{eventLauncher:function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];var o={event:t,args:i.slice(0,-1)};this.$emit("emits",o)}},render:function(t){return t("div",{style:"display: inline-flex; flex-direction: column; align-items: center;"},[this.data&&u.call(this,this,this.data,t),f(t)])}},g=v,m=(i("f921"),i("2877")),y=Object(m["a"])(g,h,p,!1,null,"35f08b94",null);e["default"]=y.exports},"46b1":function(t,e,i){"use strict";i.r(e);i("14d9"),i("a15b"),i("99af"),i("d81d"),i("fb6a");var n=i("2e29"),o=function(t){return"condition"===t.type||"approver"===t.type&&(t.isInterflow||t.isBranchFlow)},r=function(t){return Array.isArray(t)&&t.length>0},a=function(t){return r(t.conditionNodes)};function s(t,e,i){var o=["flow-path-card"];e.state&&o.push(e.state);var r=function(t,e){return t&&o.push(e),t},a=(r(n["NodeUtils"].isStartNode(e),"start-node"),r(n["NodeUtils"].isApproverNode(e),"approver"),r(n["NodeUtils"].isCopyNode(e),"copy"),r(n["NodeUtils"].isTimerNode(e),"timer"),r(n["NodeUtils"].isSubFlowNode(e),"subFlow"));return i("section",{class:o.join(" "),on:{click:this.eventLauncher.bind(t,"edit",e)}},[i("header",{class:"header"},[i("div",{class:"title-box",style:"height: 100%;width:190px;"},[i("span",{class:"title-text"},[e.properties.title])]),a&&i("el-tag",{class:"async-state",attrs:{size:"mini",effect:"plain"},style:"right:10px"},[e.properties.isAsync?"异步":"同步"])]),i("div",{class:"body"},[i("span",{class:"text"},[e.content])])])}var c=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return s.call.apply(s,[e[0]].concat(e))},d={start:c,approver:c,copy:c,timer:c,subFlow:c,interflow:c,branchFlow:c,empty:function(t){return""},condition:function(t,e,i){return i("section",{class:"flow-path-card condition"},[i("header",{class:"header"},[i("div",{class:"title-box",style:"height: 20px;width:160px;"},[i("span",{class:"title-text"},[e.properties.title])])]),i("div",{class:"body"},[i("div",{class:"text"},[e.content])])])}};function l(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=(a(e),"empty"===e.type);return o&&!n?"":i("div",{class:"add-node-btn-box2 flex justify-center"})}function u(t,e,i){if(e){var r=t.verifyMode&&!1===n["NodeUtils"].checkNode(e),s=[],c="",f=i("div",{class:"node-wrap"},[i("div",{class:"node-wrap-box ".concat(e.type," ").concat(n["NodeUtils"].isInterflowNode(e)?"interflow":""," ").concat(n["NodeUtils"].isBranchFlowNode(e)?"branchFlow":""," ").concat(r?"error":"")},[d[e.type].call(t,t,e,i),l.call(t,t,e,i)])]);return a(e)&&(c=i("div",{class:"branch-wrap"},[i("div",{class:"branch-box-wrap"},[i("div",{class:"branch-box flex justify-center relative"},[i("span",{class:"line"}),e.conditionNodes.map((function(e){return u.call(t,t,e,i)}))])]),l.call(t,t,e,i,!0)])),o(e)?i("div",{class:"col-box"},[i("div",{class:"center-line"}),i("div",{class:"top-cover-line"}),i("div",{class:"bottom-cover-line"}),f,c,u.call(t,t,e.childNode,i)]):(s.push(f),c&&s.push(c),e.childNode&&s.push(u.call(t,t,e.childNode,i)),s)}}function f(t){return t("section",{class:"end-node"},["流程结束"])}var h,p,v={props:{data:{type:Object,required:!0},verifyMode:{type:Boolean,default:!0}},watch:{},methods:{eventLauncher:function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];var o={event:t,args:i.slice(0,-1)};this.$emit("emits",o)}},render:function(t){return t("div",{style:"display: inline-flex; flex-direction: column; align-items: center;"},[this.data&&u.call(this,this,this.data,t),f(t)])}},g=v,m=(i("f44e"),i("2877")),y=Object(m["a"])(g,h,p,!1,null,"0006e200",null);e["default"]=y.exports},4791:function(t,e,i){},5451:function(t,e,i){"use strict";i.d(e,"f",(function(){return o})),i.d(e,"e",(function(){return r})),i.d(e,"c",(function(){return a})),i.d(e,"b",(function(){return s})),i.d(e,"m",(function(){return c})),i.d(e,"a",(function(){return d})),i.d(e,"q",(function(){return l})),i.d(e,"k",(function(){return u})),i.d(e,"l",(function(){return f})),i.d(e,"u",(function(){return h})),i.d(e,"g",(function(){return p})),i.d(e,"j",(function(){return v})),i.d(e,"i",(function(){return g})),i.d(e,"t",(function(){return m})),i.d(e,"s",(function(){return y})),i.d(e,"n",(function(){return N})),i.d(e,"o",(function(){return w})),i.d(e,"r",(function(){return b})),i.d(e,"w",(function(){return x})),i.d(e,"p",(function(){return I})),i.d(e,"d",(function(){return T})),i.d(e,"h",(function(){return C})),i.d(e,"v",(function(){return k}));var n=i("b775");function o(t){return Object(n["a"])({url:"/api/workflow/Engine/flowTemplate",method:"get",data:t})}function r(t){return Object(n["a"])({url:"/api/workflow/Engine/flowTemplate/".concat(t),method:"get"})}function a(t){return Object(n["a"])({url:"/api/workflow/Engine/flowTemplate/".concat(t),method:"DELETE"})}function s(t){return Object(n["a"])({url:"/api/workflow/Engine/flowTemplate",method:"post",data:t})}function c(t){return Object(n["a"])({url:"/api/workflow/Engine/flowTemplate/".concat(t.id),method:"PUT",data:t})}function d(t){return Object(n["a"])({url:"/api/workflow/Engine/flowTemplate/".concat(t,"/Actions/Copy"),method:"post"})}function l(t){return Object(n["a"])({url:"/api/workflow/Engine/flowTemplate/".concat(t,"/Actions/ExportData"),method:"GET"})}function u(t){return Object(n["a"])({url:"/api/workflow/Engine/flowTemplate/Release/".concat(t),method:"post"})}function f(t){return Object(n["a"])({url:"/api/workflow/Engine/flowTemplate/Stop/".concat(t),method:"post"})}function h(t){return Object(n["a"])({url:"/api/workflow/Engine/flowTemplate/getFlowIdByCode/".concat(t),method:"get"})}function p(){return Object(n["a"])({url:"/api/workflow/Engine/flowTemplate/ListAll",method:"get"})}function v(t){return Object(n["a"])({url:"/api/workflow/Engine/flowTemplate/PageListAll",method:"get",data:t})}function g(t){return Object(n["a"])({url:"/api/workflow/Engine/flowTemplate/PageChildListAll",method:"get",data:t})}function m(t){return Object(n["a"])({url:"/api/workflow/Engine/flowTemplate/".concat(t,"/FormInfo"),method:"get"})}function y(t){return Object(n["a"])({url:"/api/workflow/Engine/FlowComment",method:"get",data:t})}function N(t){return Object(n["a"])({url:"/api/workflow/Engine/FlowComment",method:"post",data:t})}function w(t){return Object(n["a"])({url:"/api/workflow/Engine/FlowComment/".concat(t),method:"delete"})}function b(t,e){return Object(n["a"])({url:"/api/workflow/Engine/flowTemplate/".concat(t,"/FlowJsonList"),method:"get",data:e})}function x(t){return Object(n["a"])({url:"/api/workflow/Engine/flowTemplate/".concat(t,"/MainVersion"),method:"post"})}function I(t){return Object(n["a"])({url:"/api/workflow/Engine/flowTemplate/".concat(t,"/FlowJson"),method:"delete"})}function T(t){return Object(n["a"])({url:"/api/workflow/Engine/flowTemplate/getflowAll",method:"get",data:t})}function C(t){return Object(n["a"])({url:"/api/workflow/Engine/flowTemplate/getflowList",method:"post",data:t})}function k(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object(n["a"])({url:"/api/workflow/Engine/flowTemplate/FlowJsonList/".concat(t),method:"get",data:{type:e}})}},"5ad0":function(t,e,i){"use strict";i("4791")},"62cc":function(t,e,i){"use strict";i("1d93")},"63fe":function(t,e,i){"use strict";i.r(e);var n,o,r=i("2909"),a=i("53ca"),s=(i("e9c4"),i("cca6"),i("d3b7"),i("e6cf"),i("caad"),i("2532"),i("159b"),i("46b1")),c=i("2e29"),d={name:"ProcessT",props:["tabName","conf"],data:function(){var t={};return t="object"===Object(a["a"])(this.conf)&&null!==this.conf&&"{}"!==JSON.stringify(this.conf)?Object.assign(c["NodeUtils"].createNode("start"),this.conf):Object(c["getMockData"])(),{data:t,scaleVal:95,step:5,updateId:0,activeData:null,isProcessCmp:!0,verifyMode:!1}},methods:{getData:function(){return this.verifyMode=!0,c["NodeUtils"].checkAllNode(this.data)?Promise.resolve({formData:this.data}):Promise.reject({target:this.tabName})},eventReceiver:function(t){var e=t.event,i=t.args;this.$emit("subFlow",i[0].nodeId),"edit"!==e?(c["NodeUtils"][e].apply(c["NodeUtils"],Object(r["a"])(i)),this.forceUpdate()):this.activeData=i[0]},forceUpdate:function(){this.updateId=this.updateId+1},changeScale:function(t){if(this.scaleVal>=0&&this.scaleVal<=200){if(200===this.scaleVal&&this.scaleVal+t>200)return;if(0===this.scaleVal&&this.scaleVal+t<0)return;this.scaleVal+=t}},onPropEditConfirm:function(t,e){this.activeData.content=e||"请设置条件";var i=this.activeData.properties;this.activeData.properties=t,c["NodeUtils"].isConditionNode(this.activeData)&&(t.priority!==i.priority&&c["NodeUtils"].resortPrioByCNode(this.activeData,i.priority,this.data),c["NodeUtils"].setDefaultCondition(this.activeData,this.data)),c["NodeUtils"].isStartNode(this.activeData)&&this.$emit("startNodeChange",this.data),this.onClosePanel(),this.forceUpdate()},onClosePanel:function(){this.activeData=null},isFilledPCon:function(t){var e=!1,i=function(t,e){return t.childNode&&n(t.childNode,e)},n=function(n,o){if(!e&&n){if(Array.isArray(n.conditionNodes)){var r=n.conditionNodes.some((function(e){var i=e.properties.conditions||[];return Array.isArray(t)?i.some((function(e){return t.includes(e.formId)})):i.length>0}));r?o():n.conditionNodes.forEach((function(t){return i(t,o)}))}i(n,o)}};return n(this.data,(function(){return e=!0})),e}},render:function(t){return t("div",{class:"flow-container flow-container-preview"},[t("div",{class:"tips"},[t("div",{class:"tips-item"},[t("span",{class:"icon success"},["●"]),"已完成"]),t("div",{class:"tips-item"},[t("span",{class:"icon current"},["●"]),"进行中"]),t("div",{class:"tips-item"},[t("span",{class:"icon"},["●"]),"无/未处理"])]),t(s["default"],{attrs:{verifyMode:this.verifyMode,data:this.data},key:this.updateId,on:{emits:this.eventReceiver},style:{transform:"scale(".concat(this.scaleVal/100,")")}})])}},l=d,u=(i("5ad0"),i("2877")),f=Object(u["a"])(l,n,o,!1,null,"dc910eec",null);e["default"]=f.exports},"773f":function(t,e,i){"use strict";i("83f4")},"83f4":function(t,e,i){},"91fa":function(t,e,i){"use strict";i("f12b")},"94ab":function(t,e,i){"use strict";i.r(e);var n,o,r=i("2909"),a=i("53ca"),s=(i("e9c4"),i("cca6"),i("d3b7"),i("e6cf"),i("caad"),i("2532"),i("159b"),i("3fd4")),c=i("2e29"),d={name:"Process",props:["tabName","conf"],data:function(){var t={};return t="object"===Object(a["a"])(this.conf)&&null!==this.conf&&"{}"!==JSON.stringify(this.conf)?Object.assign(c["NodeUtils"].createNode("start"),this.conf):Object(c["getMockData"])(),{data:t,scaleVal:100,step:5,updateId:0,activeData:null,isProcessCmp:!0,verifyMode:!1}},methods:{getData:function(){return this.verifyMode=!0,c["NodeUtils"].checkAllNode(this.data)?Promise.resolve({formData:this.data}):Promise.reject({target:this.tabName})},eventReceiver:function(t){var e=t.event,i=t.args;this.$emit("subFlow",i[0].nodeId),"edit"!==e?(c["NodeUtils"][e].apply(c["NodeUtils"],Object(r["a"])(i)),this.forceUpdate()):this.activeData=i[0]},forceUpdate:function(){this.updateId=this.updateId+1},changeScale:function(t){if(this.scaleVal>=0&&this.scaleVal<=200){if(200===this.scaleVal&&this.scaleVal+t>200)return;if(0===this.scaleVal&&this.scaleVal+t<0)return;this.scaleVal+=t}},onPropEditConfirm:function(t,e){this.activeData.content=e||"请设置条件";var i=this.activeData.properties;this.activeData.properties=t,c["NodeUtils"].isConditionNode(this.activeData)&&(t.priority!==i.priority&&c["NodeUtils"].resortPrioByCNode(this.activeData,i.priority,this.data),c["NodeUtils"].setDefaultCondition(this.activeData,this.data)),c["NodeUtils"].isStartNode(this.activeData)&&this.$emit("startNodeChange",this.data),this.onClosePanel(),this.forceUpdate()},onClosePanel:function(){this.activeData=null},isFilledPCon:function(t){var e=!1,i=function(t,e){return t.childNode&&n(t.childNode,e)},n=function(n,o){if(!e&&n){if(Array.isArray(n.conditionNodes)){var r=n.conditionNodes.some((function(e){var i=e.properties.conditions||[];return Array.isArray(t)?i.some((function(e){return t.includes(e.formId)})):i.length>0}));r?o():n.conditionNodes.forEach((function(t){return i(t,o)}))}i(n,o)}};return n(this.data,(function(){return e=!0})),e}},render:function(t){return t("div",{class:"flow-container flow-container-preview"},[t("div",{class:"scale-slider"},[t("i",{class:"btn el-icon-minus",on:{click:this.changeScale.bind(this,-this.step)}}),t("span",{style:"font-size:14px;"},[this.scaleVal,"%"]),t("i",{class:"btn el-icon-plus",on:{click:this.changeScale.bind(this,this.step)}})]),t("div",{class:"tips"},[t("div",{class:"tips-item"},[t("span",{class:"icon success"},["●"]),"已完成"]),t("div",{class:"tips-item"},[t("span",{class:"icon current"},["●"]),"进行中"]),t("div",{class:"tips-item"},[t("span",{class:"icon"},["●"]),"无/未处理"])]),t(s["default"],{attrs:{verifyMode:this.verifyMode,data:this.data},key:this.updateId,on:{emits:this.eventReceiver},style:{transform:"scale(".concat(this.scaleVal/100,")")}})])}},l=d,u=(i("773f"),i("2877")),f=Object(u["a"])(l,n,o,!1,null,"e75c0dc0",null);e["default"]=f.exports},a84c:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t._self._c;return e("div",[e("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center sign-dialog",attrs:{title:"请签名",closeOnClickModal:!1,visible:t.signVisible,"append-to-body":"",width:"600px"},on:{"update:visible":function(e){t.signVisible=e}}},[e("div",{staticClass:"sign-main-box"},[e("vue-esign",{ref:"esign",attrs:{height:300,width:560,lineWidth:t.lineWidth}}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showTip,expression:"showTip"}],staticClass:"tip"},[t._v("使用鼠标在此签名")])],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.handleReset}},[t._v("清空")]),e("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:function(e){return t.handleGenerate()}}},[t._v("确定签名")])],1)])],1)},o=[],r=(i("a9e3"),i("1e85")),a=i("13bf"),s={name:"SignImgDialog",components:{vueEsign:a["a"]},props:{lineWidth:{required:!0,type:Number},isDefault:{required:!0,type:Number},userInfo:{type:Object,default:function(){return{}}}},data:function(){return{signVisible:!1,loading:!1,signImg:"",showTip:!0}},methods:{init:function(){var t=this;this.handleReset(),this.signVisible=!0,this.showTip=!0,this.$nextTick((function(){t.$watch((function(){return t.$refs.esign.hasDrew}),(function(e){t.showTip=!e}))}))},handleReset:function(){var t=this;this.signImg="",this.$nextTick((function(){t.$refs.esign&&t.$refs.esign.reset()}))},handleGenerate:function(){var t=this;this.loading=!0,this.$refs.esign.generate().then((function(e){e&&(t.signImg=e);var i={signImg:t.signImg,isDefault:t.isDefault};Object(r["i"])(i).then((function(e){0==t.isDefault&&(t.$message({message:e.msg,type:"success",duration:1500}),t.userInfo.signImg||t.$store.commit("user/SET_USERINFO_SIGNIMG",t.signImg)),1==t.isDefault&&t.$store.commit("user/SET_USERINFO_SIGNIMG",t.signImg),t.signVisible=!1,t.loading=!1,t.$emit("close",t.signImg),t.handleReset()})).catch((function(e){t.signVisible=!1,t.loading=!1,t.$emit("close"),t.handleReset()}))})).catch((function(e){t.loading=!1,t.$message.warning("请签名")}))}}},c=s,d=(i("62cc"),i("2877")),l=Object(d["a"])(c,n,o,!1,null,"229309b6",null);e["default"]=l.exports},c5cd:function(t,e,i){"use strict";i.r(e);var n={initiator:[],title:"流程发起",errorRule:1,errorRuleUser:[],funcConfigRule:0,timeLimitConfig:{on:0,nodeLimit:0,duringDeal:24,formField:""},overTimeConfig:{on:0,firstOver:0,overTimeDuring:2,overNotice:!1,overAutoApprove:!1,overAutoApproveTime:5,overEvent:!1,overEventTime:5},noticeConfig:{on:0,firstOver:1,overTimeDuring:2,overNotice:!1,overEvent:!1,overEventTime:5},overTimeFuncConfig:{on:!1,interfaceId:"",interfaceName:"",templateJson:[]},noticeFuncConfig:{on:!1,interfaceId:"",interfaceName:"",templateJson:[]},initFuncConfig:{on:!1,interfaceId:"",interfaceName:"",templateJson:[]},endFuncConfig:{on:!1,interfaceId:"",interfaceName:"",templateJson:[]},flowRecallFuncConfig:{on:!1,interfaceId:"",interfaceName:"",templateJson:[]},waitMsgConfig:{on:3,msgId:"",msgName:"",templateJson:[]},endMsgConfig:{on:3,msgId:"",msgName:"",templateJson:[]},approveMsgConfig:{on:3,msgId:"",msgName:"",templateJson:[]},rejectMsgConfig:{on:3,msgId:"",msgName:"",templateJson:[]},copyMsgConfig:{on:3,msgId:"",msgName:"",templateJson:[]},overTimeMsgConfig:{on:3,msgId:"",msgName:"",templateJson:[]},noticeMsgConfig:{on:3,msgId:"",msgName:"",templateJson:[]},hasSubmitBtn:!0,submitBtnText:"提 交",hasSaveBtn:!0,saveBtnText:"暂 存",hasPressBtn:!0,pressBtnText:"催 办",hasRevokeBtn:!0,revokeBtnText:"撤 回",hasPrintBtn:!1,printBtnText:"打 印",printId:"",isComment:!1,isBatchApproval:!1,isSummary:!1,summaryType:0,titleType:0,defaultContent:"{发起用户名}的{流程名称}",titleContent:"",formOperates:[],circulateUser:[],isCustomCopy:!1,extraCopyRule:1,hasSign:!1,hasOpinion:!0,formId:"",formName:"",formFieldList:[]};e["default"]={defaultStartForm:n,start:{type:"start",content:"所有人",properties:n},approver:{type:"approver",content:"请设置审批人",properties:{title:"审批节点"}},copy:{type:"copy",content:"发起人自选",properties:{title:"抄送人",members:[],userOptional:!0}},timer:{type:"timer",content:"请设置时间",properties:{title:"定时器",day:0,hour:0,minute:0,second:0}},subFlow:{type:"subFlow",content:"请设置发起人",properties:{title:"子流程"}},interflow:{type:"approver",content:"请设置审批人",isInterflow:!0,properties:{title:"审批节点"}},branchFlow:{type:"approver",content:"请设置审批人",isBranchFlow:!0,properties:{title:"审批节点"}},condition:{type:"condition",content:"请设置条件",properties:{title:"条件",matchLogic:"and",conditions:[],initiator:null}},branch:{type:"branch",content:"",properties:{}},empty:{type:"empty",content:"",properties:{}}}},f12b:function(t,e,i){},f44e:function(t,e,i){"use strict";i("3804")},f921:function(t,e,i){"use strict";i("108b")}}]);
//# sourceMappingURL=index.umd.min.6.js.map