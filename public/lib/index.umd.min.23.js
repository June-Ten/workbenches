(("undefined"!==typeof self?self:this)["webpackJsonpavueData"]=("undefined"!==typeof self?self:this)["webpackJsonpavueData"]||[]).push([[23],{"079b":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e._self._c;return t("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center JNPF-dialog-notice",attrs:{title:"查看消息","close-on-click-modal":!1,visible:e.visible,"lock-scroll":"",width:"80%","append-to-body":""},on:{"update:visible":function(t){e.visible=t}}},[t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"notice-wrapper"},[t("div",{staticClass:"notice-hd"},[t("h1",{staticClass:"title"},[e._v(e._s(e.info.title))]),t("div",{staticClass:"info"},[t("span",[e._v(e._s(e._f("toDate")(e.info.releaseTime)))]),t("span",[e._v(e._s(e.info.releaseUser))])])]),t("p",{staticClass:"excerpt"},[e._v(e._s(e.info.excerpt))]),t("div",{staticClass:"main"},[t("div",{staticClass:"ql-editor",domProps:{innerHTML:e._s(e.info.bodyText)}})]),e.files.length?t("div",{staticClass:"file-list"},[t("JnpfUploadFile",{attrs:{disabled:"",detailed:""},model:{value:e.files,callback:function(t){e.files=t},expression:"files"}})],1):e._e()])])},n=[],s=i("0503"),o={data:function(){return{visible:!1,loading:!1,files:[],info:{}}},methods:{init:function(e){var t=this;this.visible=!0,this.loading=!0,Object(s["c"])(e).then((function(e){t.info=e.data,t.files=e.data.files?JSON.parse(e.data.files):[],t.loading=!1}))}}},l=o,r=(i("eed9"),i("2877")),c=Object(r["a"])(l,a,n,!1,null,"47332dda",null);t["default"]=c.exports},"5f9b":function(e,t,i){"use strict";i("b0a5")},"9dc8":function(e,t,i){},b0a5:function(e,t,i){},eed9:function(e,t,i){"use strict";i("9dc8")},ff88:function(e,t,i){"use strict";i.r(t);i("ac1f"),i("841c");var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"JNPF-common-layout MessageRecord-container"},[t("div",{staticClass:"JNPF-common-layout-center"},[t("el-row",{staticClass:"JNPF-common-search-box",attrs:{gutter:16}},[t("el-form",{nativeOn:{submit:function(e){e.preventDefault()}}},[t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"关键词"}},[t("el-input",{attrs:{placeholder:"请输入关键词查询",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search()}},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1)],1),t("el-col",{attrs:{span:6}},[t("el-form-item",[t("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.search()}}},[e._v(" "+e._s(e.$t("common.search")))]),t("el-button",{attrs:{icon:"el-icon-refresh-right"},on:{click:function(t){return e.reset()}}},[e._v(e._s(e.$t("common.reset"))+" ")])],1)],1)],1)],1),t("div",{staticClass:"JNPF-common-layout-main JNPF-flex-main"},[t("el-tabs",{staticClass:"messageRecord-tab",attrs:{type:"border-card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[e._l(e.messageList,(function(e){return t("el-tab-pane",{key:e.enCode,attrs:{label:e.fullName,name:e.enCode}})})),t("div",{staticClass:"box"},[t("div",{staticClass:"JNPF-common-head"},[t("div",{staticClass:"left-btn"},[t("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:e.handleDel}},[e._v("删除")])],1),t("div",{staticClass:"JNPF-common-head-right"},[t("el-tooltip",{attrs:{effect:"dark",content:e.$t("common.refresh"),placement:"top"}},[t("el-link",{attrs:{icon:"icon-ym icon-ym-Refresh JNPF-common-head-icon",underline:!1},on:{click:function(t){return e.initData()}}})],1)],1)]),t("JNPF-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,hasC:""},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{prop:"title",label:"消息标题"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("el-link",{staticStyle:{"font-size":"12px"},on:{click:function(t){return e.readInfo(i.row)}}},[e._v(e._s(i.row.title)+" ")])]}}])}),t("el-table-column",{attrs:{prop:"type",label:"消息类型",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.getType(t.row.type))+" ")]}}])}),t("el-table-column",{attrs:{prop:"releaseUser",label:"发送人员",width:"120"}}),t("el-table-column",{attrs:{prop:"releaseTime",label:"发送时间",formatter:e.jnpf.tableDateFormat,width:"120"}}),t("el-table-column",{attrs:{prop:"isRead",label:"状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(i){return["1"==i.row.isRead?t("el-tag",{attrs:{type:"success"}},[e._v("已读")]):t("el-tag",{attrs:{type:"info"}},[e._v("未读")])]}}])})],1),t("pagination",{attrs:{total:e.total,page:e.listQuery.currentPage,limit:e.listQuery.pageSize},on:{"update:page":function(t){return e.$set(e.listQuery,"currentPage",t)},"update:limit":function(t){return e.$set(e.listQuery,"pageSize",t)},pagination:e.initData}})],1)],2)],1)],1),e.formVisible?t("Form",{ref:"Form",on:{refreshDataList:e.initData}}):e._e(),e.scheduleVisible?t("ScheduleView",{ref:"schedule"}):e._e()],1)},n=[],s=i("5530"),o=i("2909"),l=(i("14d9"),i("99af"),i("4de4"),i("d3b7"),i("a15b"),i("d81d"),i("0503")),r=i("079b"),c=i("6e2c"),d={name:"messageRecord",components:{Form:r["default"],ScheduleView:c["default"]},data:function(){return{visible:!1,formVisible:!1,keyword:"",activeName:"0",list:[],multipleSelection:[],total:0,listLoading:!0,listQuery:{currentPage:1,pageSize:20,sort:"desc"},scheduleVisible:!1,messageList:[]}},watch:{activeName:function(e){this.keyword="",this.search()}},created:function(){this.getDictionaryData(),this.initData()},methods:{search:function(){this.listQuery={currentPage:1,pageSize:20,sort:"desc"},this.initData()},reset:function(){this.keyword="",this.search()},getDictionaryData:function(){var e=this;this.messageList=[],this.$store.dispatch("base/getDictionaryData",{sort:"msgSourceType"}).then((function(t){var i,a={id:"0",fullName:"全部",enCode:"0"};(i=e.messageList).push.apply(i,[a].concat(Object(o["a"])(t)))}))},getType:function(e){var t=this.messageList.filter((function(t){return t.enCode==e}))[0];return t&&t.fullName||""},initData:function(){var e=this;this.listLoading=!0;var t=Object(s["a"])(Object(s["a"])({},this.listQuery),{},{keyword:this.keyword,type:"0"==this.activeName?"":this.activeName});this.list=[],Object(l["h"])(t).then((function(t){e.list=t.data.list,e.total=t.data.pagination.total,e.listLoading=!1}))},handleDel:function(){var e=this;if(this.multipleSelection.length){var t={ids:this.multipleSelection.join(",")};this.$confirm("您确定要删除这些数据吗, 是否继续?","提示",{type:"warning"}).then((function(){Object(l["b"])(t).then((function(t){e.$message({type:"success",message:t.msg}),e.initData()}))})).catch((function(){}))}else this.$message({type:"error",message:"请选择一条数据"})},handleSelectionChange:function(e){this.multipleSelection=e.map((function(e){return e.id}))},readInfo:function(e){var t=this;Object(l["c"])(e.id).then((function(a){if(t.info=a.data,t.files=a.data.files?JSON.parse(a.data.files):[],"0"==e.isRead&&(e.isRead="1",t.$emit("read")),4==e.type){var n=JSON.parse(a.data.bodyText);if(3==n.type)return;return t.scheduleVisible=!0,void t.$nextTick((function(){t.$refs.schedule.init(n.id,"",n.groupId)}))}if(2==e.type&&2==e.flowType){var s=JSON.parse(a.data.bodyText);t.drawer=!1,t.$router.push("/workFlow/entrust?config="+s.type)}else if(1==e.type||3==e.type)t.formVisible=!0,t.$nextTick((function(){t.$refs.Form.init(e.id)}));else{if(!a.data.bodyText)return;t.drawer=!1;var o=i("27ae").Base64;t.$router.push("/workFlowDetail?config="+encodeURIComponent(o.encode(a.data.bodyText)))}}))}}},u=d,f=(i("5f9b"),i("2877")),p=Object(f["a"])(u,a,n,!1,null,"3d41dee8",null);t["default"]=p.exports}}]);
//# sourceMappingURL=index.umd.min.23.js.map