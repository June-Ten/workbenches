(("undefined"!==typeof self?self:this)["webpackJsonpavueData"]=("undefined"!==typeof self?self:this)["webpackJsonpavueData"]||[]).push([[19],{"0c2e":function(e,t,i){"use strict";i.r(t);var l=function(){var e=this,t=e._self._c;return t("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center JNPF-dialog-export",attrs:{title:"导出数据","close-on-click-modal":!1,visible:e.visible,"lock-scroll":"",width:"600px"},on:{"update:visible":function(t){e.visible=t}}},[t("el-form",{attrs:{"label-position":"top"}},[t("el-form-item",[t("el-radio-group",{model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[t("el-radio",{attrs:{label:0}},[e._v("当前页面数据")]),t("el-radio",{attrs:{label:1}},[e._v("全部页面数据")])],1)],1),t("el-form-item",{staticClass:"export-line"},[t("p",{staticClass:"export-label",attrs:{slot:"label"},slot:"label"},[e._v("列表数据"),t("span",[e._v("请选择导出字段")])]),t("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选")]),t("el-checkbox-group",{on:{change:e.handleCheckedChange},model:{value:e.columns,callback:function(t){e.columns=t},expression:"columns"}},e._l(e.columnList,(function(i){return t("el-checkbox",{key:i.prop,staticClass:"column-item",attrs:{label:i.prop,title:i.label}},[e._v(" "+e._s(i.label)+" ")])})),1)],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("p",{staticClass:"footer-tip"},[e._v("提示:系统将导出列表中选中的数据")]),t("el-button",{on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$t("common.cancelButton")))]),t("el-button",{attrs:{type:"primary"},on:{click:e.downLoad}},[e._v("导 出")])],1)],1)},n=[],a=(i("d81d"),{data:function(){return{visible:!1,btnLoading:!1,type:0,columns:[],checkAll:!0,isIndeterminate:!1,columnList:[]}},methods:{init:function(e){this.visible=!0,this.checkAll=!0,this.isIndeterminate=!1,this.columnList=e,this.columns=e.map((function(e){return e.prop}))},handleCheckAllChange:function(e){this.columns=e?this.columnList.map((function(e){return e.prop})):[],this.isIndeterminate=!1},handleCheckedChange:function(e){var t=e.length;this.checkAll=t===this.columnList.length,this.isIndeterminate=t>0&&t<this.columnList.length},downLoad:function(){if(!this.columns.length)return this.$message.warning("请至少选择一个导出字段");this.$emit("download",{dataType:this.type,selectKey:this.columns})}}}),_=a,o=i("2877"),s=Object(o["a"])(_,l,n,!1,null,null,null);t["default"]=s.exports},"11d5":function(e,t,i){e.exports=i.p+"static/img/query-noData.a2c7c515.png"},1374:function(e,t,i){"use strict";i.r(t);var l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"main"},["dialog"===e.config.popupType?[t("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center",attrs:{title:e.config.popupTitle,"close-on-click-modal":!1,visible:e.visible,"lock-scroll":"","append-to-body":"",width:e.config.popupWidth},on:{"update:visible":function(t){e.visible=t},close:function(t){return e.$emit("close")}}},[e.loading?e._e():t("parser",{key:e.key,ref:"dynamicForm",attrs:{"form-conf":e.formConf},on:{submit:e.submitForm}}),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$t("common.cancelButton")))]),t("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:e.dataFormSubmit}},[e._v(" "+e._s(e.$t("common.confirmButton")))])],1)],1)]:e._e(),"drawer"===e.config.popupType?[t("el-drawer",{ref:"drawer",staticClass:"JNPF-common-drawer",attrs:{title:e.config.popupTitle,visible:e.visible,wrapperClosable:!1,size:e.config.popupWidth,"append-to-body":""},on:{"update:visible":function(t){e.visible=t},close:function(t){return e.$emit("close")}}},[t("div",{staticClass:"JNPF-flex-main"},[t("div",{staticClass:"dynamicForm"},[e.loading?e._e():t("parser",{key:e.key,ref:"dynamicForm",attrs:{"form-conf":e.formConf},on:{submit:e.submitForm}})],1),t("div",{staticClass:"drawer-footer"},[t("el-button",{on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$t("common.cancelButton")))]),t("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:e.dataFormSubmit}},[e._v(" "+e._s(e.$t("common.confirmButton")))])],1)])])]:e._e()],2)},n=[],a=i("5530"),_=(i("d81d"),i("caad"),i("d3b7"),i("159b"),i("e9c4"),i("49aa")),o=i("ef22"),s=i("17de"),r=i("5880"),c={name:"popup",components:{Parser:_["default"]},props:{},data:function(){return{visible:!1,btnLoading:!1,loading:!1,config:{},formConf:{},formData:{},isPreview:!1,key:+new Date,id:"",dataForm:{id:"",data:""},modelId:"",isAdd:!1}},computed:Object(a["a"])({},Object(r["mapGetters"])(["userInfo"])),methods:{init:function(e,t,i){var l=this,n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4?arguments[4]:void 0;this.loading=!0,this.config=e,this.id=i,this.isPreview=n,this.modelId=t,this.isAdd=!0,this.$nextTick((function(){l.config.modelId&&l.getConfigData(a)}))},getConfigData:function(e){var t=this;Object(o["m"])(this.config.modelId).then((function(i){if(200===i.code&&i.data){t.formConf=JSON.parse(i.data.formData);var l=function(e){if(t.config.formOptions.length)for(var i in e)for(var l=0;l<t.config.formOptions.length;l++){var n=t.config.formOptions[l];n.currentField==i&&(t.formData[n.field]=e[i])}t.fillFormData(t.formConf,t.formData),t.$nextTick((function(){t.visible=!0,t.loading=!1}))};if(t.id)Object(o["r"])(t.modelId,t.id).then((function(e){var i=e.data;if(i.data){var n=JSON.parse(i.data);t.formData={},l(n)}}));else{var n=e;l(n)}}else t.$message({message:i.msg||"请求出错，请重试",type:"error",duration:1500})})).catch((function(){}))},fillFormData:function(e,t){var i=this,l=function e(l,n){for(var a=0;a<l.length;a++){var _=l[a];if(_.__vModel__){var o=t.hasOwnProperty(_.__vModel__)?t[_.__vModel__]:_.__config__.defaultValue;if(_.__config__.isSubTable||(_.__config__.defaultValue=o),(i.isAdd||_.__config__.isSubTable)&&_.__config__.defaultCurrent){if("datePicker"===_.__config__.jnpfKey){var s=_.format,r=i.jnpf.toDate((new Date).getTime(),s),c="yyyy"===s?"-01-01 00:00:00":"yyyy-MM"===s?"-01 00:00:00":"yyyy-MM-dd"===s?" 00:00:00":"";_.__config__.defaultValue=new Date(r+c).getTime()}"timePicker"===_.__config__.jnpfKey&&(_.__config__.defaultValue=i.jnpf.toDate(new Date,_.format)),"organizeSelect"===_.__config__.jnpfKey&&i.userInfo.organizeIdList instanceof Array&&i.userInfo.organizeIdList.length>0&&(_.__config__.defaultValue=1==_.multiple?[i.userInfo.organizeIdList]:i.userInfo.organizeIdList),"depSelect"===_.__config__.jnpfKey&&i.userInfo.departmentId&&(_.__config__.defaultValue=_.multiple?[i.userInfo.departmentId]:i.userInfo.departmentId),"posSelect"===_.__config__.jnpfKey&&i.userInfo.positionIds instanceof Array&&i.userInfo.positionIds.length>0&&(_.__config__.defaultValue=_.multiple?i.userInfo.positionIds.map((function(e){return e.id})):i.userInfo.positionIds[0].id),"roleSelect"===_.__config__.jnpfKey&&i.userInfo.roleIds instanceof Array&&i.userInfo.roleIds.length>0&&(_.__config__.defaultValue=_.multiple?i.userInfo.roleIds:i.userInfo.roleIds[0]),"groupSelect"===_.__config__.jnpfKey&&i.userInfo.groupIds instanceof Array&&i.userInfo.groupIds.length>0&&(_.__config__.defaultValue=_.multiple?i.userInfo.groupIds:i.userInfo.groupIds[0]),["userSelect"].includes(_.__config__.jnpfKey)&&i.userInfo.userId&&(_.__config__.defaultValue=_.multiple?[i.userInfo.userId]:i.userInfo.userId),"usersSelect"===_.__config__.jnpfKey&&i.userInfo.userId&&(_.__config__.defaultValue=_.multiple?[i.userInfo.userId+"--user"]:i.userInfo.userId+"--user")}}!i.isPreview&&i.useFormPermission&&function(){var e=_.__config__.isSubTable?n.__vModel__+"-"+_.__vModel__:_.__vModel__,t=!0;i.formOperates&&i.formOperates.length&&(t=!i.formOperates.some((function(t){return t.enCode===e}))),t=_.__config__.noShow?_.__config__.noShow:t,i.$set(_.__config__,"noShow",t)}(),_.__config__&&_.__config__.children&&Array.isArray(_.__config__.children)&&e(_.__config__.children,_)}};l(e.fields),e.formData=t},submitForm:function(e,t){var i=this;if(e){this.btnLoading=!0;var l=function(e,t){i.$message({message:e.msg,type:"success",duration:1500,onClose:function(){t&&"function"===typeof t&&t(),i.visible=!1,i.btnLoading=!1}})};if(this.config.customBtn){this.config.templateJson&&this.config.templateJson.length&&this.config.templateJson.forEach((function(t){t.defaultValue=1==t.sourceType?e[t.relationField]||"":t.relationField}));var n={paramList:this.config.templateJson||[]};Object(s["i"])(this.config.interfaceId,n).then((function(e){l(e,t)})).catch((function(){i.btnLoading=!1}))}else{var _=Object(a["a"])(Object(a["a"])({},this.formData),e);this.dataForm.data=JSON.stringify(_),Object(o["i"])(this.config.modelId,this.dataForm).then((function(e){l(e,t)})).catch((function(){i.btnLoading=!1}))}}},dataFormSubmit:function(){if(this.isPreview)return this.$message({message:"功能预览不支持数据保存",type:"warning"});this.$refs.dynamicForm&&this.$refs.dynamicForm.submitForm()}}},d=c,u=i("2877"),f=Object(u["a"])(d,l,n,!1,null,null,null);t["default"]=f.exports},"21a2":function(e,t,i){"use strict";i("2270")},2270:function(e,t,i){},2638:function(e,t,i){"use strict";function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t,i=1;i<arguments.length;i++)for(var l in t=arguments[i],t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e},l.apply(this,arguments)}var n=["attrs","props","domProps"],a=["class","style","directives"],_=["on","nativeOn"],o=function(e){return e.reduce((function(e,t){for(var i in t)if(e[i])if(-1!==n.indexOf(i))e[i]=l({},e[i],t[i]);else if(-1!==a.indexOf(i)){var o=e[i]instanceof Array?e[i]:[e[i]],r=t[i]instanceof Array?t[i]:[t[i]];e[i]=[].concat(o,r)}else if(-1!==_.indexOf(i))for(var c in t[i])if(e[i][c]){var d=e[i][c]instanceof Array?e[i][c]:[e[i][c]],u=t[i][c]instanceof Array?t[i][c]:[t[i][c]];e[i][c]=[].concat(d,u)}else e[i][c]=t[i][c];else if("hook"===i)for(var f in t[i])e[i][f]=e[i][f]?s(e[i][f],t[i][f]):t[i][f];else e[i]=t[i];else e[i]=t[i];return e}),{})},s=function(e,t){return function(){e&&e.apply(this,arguments),t&&t.apply(this,arguments)}};e.exports=o},"30c2":function(e,t,i){"use strict";i.r(t);var l=function(){var e=this,t=e._self._c;return t("el-dialog",e._g(e._b({staticClass:"JNPF-full-dialog",attrs:{"close-on-click-modal":!1,"modal-append-to-body":!1,fullscreen:"","lock-scroll":"","show-close":!1,modal:!1,"append-to-body":""},on:{open:e.onOpen}},"el-dialog",e.$attrs,!1),e.$listeners),[t("div",{staticClass:"JNPF-full-dialog-header"},[t("div",{staticClass:"header-title"},[t("img",{staticClass:"header-logo",attrs:{src:i("73b6")}}),t("p",{staticClass:"header-txt"},[e._v("· 打印预览")])]),t("div",{staticClass:"header-page"},[t("el-button",{on:{click:function(t){e.pageIndex=e.pageIndex-1}}},[e._v("上一页")]),t("el-input-number",{staticClass:"text-center",staticStyle:{width:"60px"},attrs:{controls:!1,"controls-position":"right",min:1,max:e.batchData.length},on:{change:e.scrollpage,blur:e.scrollpage},model:{value:e.pageIndex,callback:function(t){e.pageIndex=t},expression:"pageIndex"}}),t("span",{staticClass:"page-size"},[e._v("/ "+e._s(e.batchData.length))]),t("el-button",{on:{click:function(t){e.pageIndex=e.pageIndex+1}}},[e._v("下一页")])],1),t("div",{staticClass:"options"},[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.word}},[e._v("下 载")]),t("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.print("batch")}}},[e._v("打 印")]),t("el-button",{on:{click:function(t){return e.closeDialog()}}},[e._v(e._s(e.$t("common.cancelButton")))])],1)]),t("div",{ref:"barcodewrap"}),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"tsPrint",staticClass:"main"},e._l(e.batchData,(function(i,l){return t("div",{key:l,staticClass:"print-content",domProps:{innerHTML:e._s(i)}})})),0)])},n=[],a=i("c5c2"),_={mixins:[a["default"]],data:function(){return{pageIndex:1}},watch:{pageIndex:{handler:function(e){this.scrollpage(e)},deep:!0,immediate:!0}},methods:{scrollpage:function(){var e=this,t=this.pageIndex-1<0?0:this.pageIndex-1;this.$nextTick((function(){var i=e.$refs.tsPrint;i&&i.scrollTo({top:(window.document.body.clientHeight-10)*t,behavior:"smooth"})}))},onOpen:function(){this.initData("batch")}}},o=_,s=(i("21a2"),i("2877")),r=Object(s["a"])(o,l,n,!1,null,"6c51737c",null);t["default"]=r.exports},"3bac":function(e,t,i){},"49aa":function(e,t,i){"use strict";i.r(t);var l,n,a=i("c2da"),_=a["a"],o=i("2877"),s=Object(o["a"])(_,l,n,!1,null,null,null);t["default"]=s.exports},"4d3d":function(e,t,i){"use strict";i.r(t);var l=function(){var e=this,t=e._self._c;return t("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center superQuery-dialog",attrs:{title:"高级查询","close-on-click-modal":!1,visible:e.visible,"lock-scroll":"",width:"800px"},on:{"update:visible":function(t){e.visible=t}}},[t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"superQuery-main"},[e.conditionList.length?[t("Condition",{key:e.key2,ref:"base",attrs:{value:e.conditionList,columnOptions:e.columnOptions,matchLogic:e.matchLogic}})]:t("div",{staticClass:"query-noData"},[t("img",{staticClass:"noData-img",attrs:{src:i("11d5"),alt:""}}),t("div",{staticClass:"noData-txt"},[t("span",[e._v("没有任何查询条件")]),t("el-divider",{attrs:{direction:"vertical"}}),t("el-link",{attrs:{type:"primary",underline:!1},on:{click:e.addCondition}},[e._v("点击新增")])],1)])],2),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("div",{staticClass:"footer-options"},[t("el-button",{staticClass:"add-btn",on:{click:e.addPlan}},[e._v("保存方案")]),t("el-popover",{ref:"planPopper",attrs:{width:"240",trigger:"click","popper-class":"plan-popper"}},[t("el-button",{attrs:{slot:"reference"},slot:"reference"},[e._v("方案选择"),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e.planList.length?t("div",{staticClass:"plan-list"},e._l(e.planList,(function(i,l){return t("div",{key:l,staticClass:"plan-list-item",on:{click:function(t){return e.selectPlan(i)}}},[t("el-link",{staticClass:"plan-list-name",attrs:{type:"primary",underline:!1}},[e._v(e._s(i.fullName)+" ")]),t("i",{staticClass:"el-icon-close",on:{click:function(t){return t.stopPropagation(),e.delPlan(i.id,l)}}})],1)})),0):t("div",{staticClass:"noData-txt"},[e._v("暂无数据")])],1)],1),t("el-button",{on:{click:e.close}},[e._v(e._s(e.$t("common.cancelButton")))]),t("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:function(t){return e.query()}}},[e._v("查 询")])],1),t("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center",attrs:{title:"保存方案",visible:e.addPlanVisible,width:"600px","append-to-body":"","lock-scroll":""},on:{"update:visible":function(t){e.addPlanVisible=t}}},[t("el-form",{ref:"dataForm",attrs:{model:e.dataForm,rules:e.dataRule,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"方案名称",prop:"fullName"}},[t("el-input",{attrs:{placeholder:"请输入保存的方案名称"},model:{value:e.dataForm.fullName,callback:function(t){e.$set(e.dataForm,"fullName",t)},expression:"dataForm.fullName"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.addPlanVisible=!1}}},[e._v(e._s(e.$t("common.cancelButton")))]),t("el-button",{attrs:{type:"primary",loading:e.saveBtnLoading},on:{click:function(t){return e.savePlan()}}},[e._v(" "+e._s(e.$t("common.confirmButton")))])],1)],1)],1)},n=[],a=i("53ca"),_=i("5530"),o=(i("e9c4"),i("14d9"),i("a434"),i("d3b7"),i("4de4"),i("caad"),i("b775"));function s(e){return Object(o["a"])({url:"/api/system/AdvancedQuery/".concat(e,"/List"),method:"get"})}function r(e){return Object(o["a"])({url:"/api/system/AdvancedQuery/".concat(e),method:"DELETE"})}function c(e){return Object(o["a"])({url:"/api/system/AdvancedQuery",method:"post",data:e})}function d(e){return Object(o["a"])({url:"/api/system/AdvancedQuery/".concat(e.id),method:"put",data:e})}var u=i("8a04"),f=i("ed08"),p=[{logic:"and",groups:[{fieldValue:"",field:"",symbol:"",jnpfKey:"",cellKey:+new Date}]}],m={components:{Condition:u["default"]},props:{columnOptions:{type:Array,default:function(){return[]}}},data:function(){return{visible:!1,addPlanVisible:!1,loading:!1,btnLoading:!1,saveBtnLoading:!1,conditionList:Object(f["b"])(p),staging:{},key2:+new Date,planList:[],fieldOptions:[],dataForm:{fullName:""},dataRule:{fullName:[{required:!0,message:"请输入保存的方案名称",trigger:"blur"}]},matchLogic:"and"}},computed:{currMenuId:function(){return this.$route.meta.modelId||""}},methods:{init:function(){var e=this;this.visible=!0,this.loading=!0;var t=JSON.parse(JSON.stringify(this.columnOptions));this.fieldOptions=t,this.getAdvancedQueryList(),this.$nextTick((function(){e.loading=!1}))},close:function(){this.conditionList=this.staging&&this.staging.conditionList||Object(f["b"])(p),this.matchLogic=this.staging&&this.staging.matchLogic||"and",this.visible=!1},getAdvancedQueryList:function(){var e=this;this.currMenuId&&s(this.currMenuId).then((function(t){e.planList=t.data.list}))},addCondition:function(){var e={logic:"and",groups:[{field:"",symbol:"",jnpfKey:"",fieldValueType:2,fieldValue:void 0,fieldValueJnpfKey:"",cellKey:+new Date}]};this.conditionList.push(e)},delPlan:function(e,t){var i=this;r(e).then((function(e){i.$message({type:"success",message:e.msg,duration:1500,onClose:function(){i.planList.splice(t,1)}})}))},selectPlan:function(e){this.conditionList=e.conditionJson?JSON.parse(e.conditionJson):[],this.matchLogic=e.matchLogic,this.key2=+new Date,this.$refs.planPopper.doClose()},addPlan:function(){var e=this;this.exist()&&(this.addPlanVisible=!0,this.$nextTick((function(){e.$refs["dataForm"].resetFields()})))},savePlan:function(){var e=this;this.$refs["dataForm"].validate((function(t){if(t){var i=e.planList.some((function(t){return t.fullName===e.dataForm.fullName}));if(!i)return e.submit();var l=e.planList.filter((function(t){return t.fullName===e.dataForm.fullName}));e.$confirm("".concat(l[0].fullName,"已存在, 是否覆盖方案?"),"",{type:"warning"}).then((function(){e.submit(l[0].id)})).catch((function(){}))}}))},submit:function(e){var t=this;this.saveBtnLoading=!0;var i=Object(_["a"])(Object(_["a"])({id:e||""},this.dataForm),{},{matchLogic:this.matchLogic,moduleId:this.currMenuId,conditionJson:JSON.stringify(this.conditionList)}),l=i.id?d:c;l(i).then((function(e){t.getAdvancedQueryList(),t.addPlanVisible=!1,t.saveBtnLoading=!1,t.$message({message:e.msg,type:"success",duration:1500})})).catch((function(){t.saveBtnLoading=!1}))},getDataType:function(e){return e?["inputNumber","datePicker","rate","slider"].includes(e)?"number":["uploadFile","uploadImg","cascader","organizeSelect","areaSelect"].includes(e)?"array":"":""},exist:function(e){var t="query"==e?"查询":"保存",i=this.$refs.base&&this.$refs.base.getData()||"";if("query"==e&&!i)return!0;if(!i)return this.$message.warning("请添加".concat(t,"条件"));this.conditionList=i.conditionList,this.matchLogic=i.matchLogic;for(var l=!0,n=0;n<this.conditionList.length;n++)for(var _=this.conditionList[n],o=0;o<_.groups.length;o++){var s=_.groups[o];if(!s.field)return this.$message.warning("".concat(t,"字段不能为空")),void(l=!1);if(!s.symbol)return this.$message.warning("".concat(t,"符号不能为空")),void(l=!1);if(!["null","notNull"].includes(s.symbol)&&!["switch"].includes(s.jnpfKey)&&(!s.fieldValue&&0!==s.fieldValue||"object"===Object(a["a"])(s.fieldValue)&&0==s.fieldValue.length||this.jnpf.isEmpty(s.fieldValue)))return this.$message.warning("数据值不能为空"),void(l=!1)}return l},query:function(){if(this.exist("query")){var e={matchLogic:this.matchLogic,conditionList:this.conditionList};this.staging=JSON.parse(JSON.stringify(e)),e=JSON.stringify(e),this.conditionList.length||(e=""),this.$emit("superQuery",e),this.visible=!1}}}},b=m,h=(i("f404"),i("c62f"),i("2877")),g=Object(h["a"])(b,l,n,!1,null,"7b75e4bc",null);t["default"]=g.exports},"8a04":function(e,t,i){"use strict";i.r(t);i("caad");var l=function(){var e=this,t=e._self._c;return t("section",{staticClass:"condition-pane pd-10"},[e.conditionList.length?t("div",{staticClass:"mb-10px"},[t("span",{staticStyle:{"font-size":"14px"}},[e._v("分组匹配逻辑")]),t("el-select",{staticStyle:{width:"150px","margin-left":"10px"},attrs:{placeholder:"请选择"},model:{value:e.matchLog,callback:function(t){e.matchLog=t},expression:"matchLog"}},e._l(e.logicOptions,(function(e){return t("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1)],1):e._e(),e._l(e.conditionList,(function(i,l){return t("div",{key:l,staticStyle:{"margin-top":"10px"}},[t("el-row",{attrs:{gutter:5}},[t("el-col",{staticClass:"mb-10",attrs:{span:7}},[t("el-col",{staticStyle:{"line-height":"32px"},attrs:{span:10}},[e._v("条件逻辑")]),t("el-col",{attrs:{span:14}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:i.logic,callback:function(t){e.$set(i,"logic",t)},expression:"item.logic"}},e._l(e.logicOptions,(function(e){return t("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1)],1)],1),t("el-col",{staticClass:"mb-10",attrs:{span:3.5}},[t("el-button",{attrs:{icon:"el-icon-plus"},on:{click:function(t){return e.addItem(l)}}},[e._v("添加条件")])],1),t("el-col",{staticClass:"mb-10",attrs:{span:5}},[t("el-button",{staticClass:"btn-del",attrs:{icon:"icon-ym icon-ym-btn-clearn"},on:{click:function(t){return e.delGroup(l)}}},[e._v("删除分组")])],1),e._l(i.groups,(function(n,a){return t("el-col",{key:l+a,staticClass:"mb-10",attrs:{span:24}},[t("el-row",{attrs:{gutter:5}},[t("el-col",{attrs:{span:7}},[t("el-select",{attrs:{placeholder:"请选择",filterable:""},on:{change:function(t){return e.fieldNameChange(t,n,l,a)}},model:{value:n.field,callback:function(t){e.$set(n,"field",t)},expression:"subItem.field"}},e._l(e.usedFormItems,(function(e){return t("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1)],1),t("el-col",{attrs:{span:7}},[t("el-select",{staticClass:"condition-select",attrs:{placeholder:"运算符号",filterable:""},on:{change:function(t){return e.symbolChange(t,n,l,a)}},model:{value:n.symbol,callback:function(t){e.$set(n,"symbol",t)},expression:"subItem.symbol"}},e._l(e.getSymbolOptions(n.jnpfKey),(function(e){return t("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1)],1),t("el-col",{attrs:{span:8}},["inputNumber"===n.jnpfKey?["between"==n.symbol?t("NumRange",{attrs:{disabled:n.disabled},model:{value:n.fieldValue,callback:function(t){e.$set(n,"fieldValue",t)},expression:"subItem.fieldValue"}}):t("JnpfInputNumber",{attrs:{placeholder:"请输入",disabled:n.disabled,precision:n.precision},model:{value:n.fieldValue,callback:function(t){e.$set(n,"fieldValue",t)},expression:"subItem.fieldValue"}})]:"autoComplete"===n.jnpfKey?[t("JnpfAutoComplete",{attrs:{placeholder:"请选择",interfaceId:n.interfaceId,clearable:"",disabled:n.disabled,propsValue:n.propsValue,relationField:n.relationField,templateJson:n.templateJson,total:n.total},model:{value:n.fieldValue,callback:function(t){e.$set(n,"fieldValue",t)},expression:"subItem.fieldValue"}})]:["radio","checkbox","select"].includes(n.jnpfKey)?[["null","notNull"].includes(n.symbol)?[t("el-input",{attrs:{disabled:n.disabled,placeholder:"请选择"},model:{value:n.fieldValue,callback:function(t){e.$set(n,"fieldValue",t)},expression:"subItem.fieldValue"}})]:t("el-select",{key:n.cellKey,attrs:{disabled:n.disabled,placeholder:"请选择",multiple:n.multiple,filterable:""},on:{change:function(t){return e.input()}},model:{value:n.fieldValue,callback:function(t){e.$set(n,"fieldValue",t)},expression:"subItem.fieldValue"}},e._l(n.options,(function(e,i){return t("el-option",{key:i,attrs:{disabled:n.disabled,label:e[n.props.label],value:e[n.props.value]}})})),1)]:["cascader"].includes(n.jnpfKey)?[t("JnpfCascader",{key:n.cellKey,attrs:{options:n.options,props:n.props,multiple:n.multiple,placeholder:n.placeholder,clearable:n.clearable,separator:n.separator,filterable:n.filterable,disabled:n.disabled,"show-all-levels":n.showAllLevels},model:{value:n.fieldValue,callback:function(t){e.$set(n,"fieldValue",t)},expression:"subItem.fieldValue"}})]:["treeSelect"].includes(n.jnpfKey)?[t("JnpfTreeSelect",{key:n.cellKey,attrs:{conditionFilter:"",options:n.options,props:n.props,placeholder:n.placeholder,clearable:n.clearable,multiple:n.multiple,filterable:n.filterable,disabled:n.disabled},model:{value:n.fieldValue,callback:function(t){e.$set(n,"fieldValue",t)},expression:"subItem.fieldValue"}})]:"calculate"===n.jnpfKey?["between"==n.symbol?t("NumRange",{attrs:{precision:n.precision,disabled:n.disabled},model:{value:n.fieldValue,callback:function(t){e.$set(n,"fieldValue",t)},expression:"subItem.fieldValue"}}):t("el-input-number",{attrs:{placeholder:"请输入",precision:n.precision||0,disabled:n.disabled,controls:!1,"controls-position":"right"},model:{value:n.fieldValue,callback:function(t){e.$set(n,"fieldValue",t)},expression:"subItem.fieldValue"}})]:["rate","slider"].includes(n.jnpfKey)?["between"==n.symbol?t("NumRange",{attrs:{precision:n.precision,disabled:n.disabled},model:{value:n.fieldValue,callback:function(t){e.$set(n,"fieldValue",t)},expression:"subItem.fieldValue"}}):t("el-input-number",{attrs:{placeholder:"请输入",precision:0,disabled:n.disabled,"controls-position":"right"},model:{value:n.fieldValue,callback:function(t){e.$set(n,"fieldValue",t)},expression:"subItem.fieldValue"}})]:"switch"===n.jnpfKey?[t("el-switch",{staticStyle:{"margin-top":"5px"},attrs:{"active-value":1,disabled:n.disabled,"inactive-value":0},model:{value:n.fieldValue,callback:function(t){e.$set(n,"fieldValue",t)},expression:"subItem.fieldValue"}})]:"timePicker"===n.jnpfKey?["between"==n.symbol?t("el-time-picker",{key:"time1",staticStyle:{width:"100%"},attrs:{disabled:n.disabled,"range-separator":"至",placeholder:"请选择",clearable:"","is-range":!0,"value-format":n.format,format:n.format},on:{input:function(t){return e.input()}},model:{value:n.fieldValue,callback:function(t){e.$set(n,"fieldValue",t)},expression:"subItem.fieldValue"}}):t("el-time-picker",{key:"time2",staticStyle:{width:"100%"},attrs:{placeholder:"请选择",clearable:"",disabled:n.disabled,"value-format":n.format,format:n.format},on:{input:function(t){return e.input()}},model:{value:n.fieldValue,callback:function(t){e.$set(n,"fieldValue",t)},expression:"subItem.fieldValue"}})]:["datePicker"].includes(n.jnpfKey)?["between"==n.symbol?[t("JnpfDateRangePicker",{key:"year1",staticStyle:{width:"100%"},attrs:{clearable:"",disabled:n.disabled,placeholder:"请选择",separator:"至",startPlaceholder:"开始日期",endPlaceholder:"结束日期",format:n.format},on:{input:function(t){return e.input()}},model:{value:n.fieldValue,callback:function(t){e.$set(n,"fieldValue",t)},expression:"subItem.fieldValue"}})]:t("JnpfDatePicker",{key:"year2",staticStyle:{width:"100%"},attrs:{clearable:"",disabled:n.disabled,placeholder:"请选择",format:n.format},on:{input:function(t){return e.input()}},model:{value:n.fieldValue,callback:function(t){e.$set(n,"fieldValue",t)},expression:"subItem.fieldValue"}})]:["createTime","modifyTime"].includes(n.jnpfKey)?["between"==n.symbol?[t("el-date-picker",{key:"year1",staticStyle:{width:"100%"},attrs:{clearable:"","value-format":"timestamp",disabled:n.disabled,placeholder:"请选择","range-separator":"至",type:"datetimerange",startPlaceholder:"开始日期",endPlaceholder:"结束日期"},on:{input:function(t){return e.input()}},model:{value:n.fieldValue,callback:function(t){e.$set(n,"fieldValue",t)},expression:"subItem.fieldValue"}})]:t("el-date-picker",{key:"year2",attrs:{clearable:"",type:"datetime","value-format":"timestamp",disabled:n.disabled,placeholder:"请选择"},on:{input:function(t){return e.input()}},model:{value:n.fieldValue,callback:function(t){e.$set(n,"fieldValue",t)},expression:"subItem.fieldValue"}})]:["organizeSelect","currOrganize"].includes(n.jnpfKey)?[t("JnpfOrganizeSelect",{ref:"comselect",refInFor:!0,attrs:{disabled:n.disabled,placeholder:"请选择",clearable:"",multiple:n.multiple,ableIds:n.ableIds,selectType:n.selectType},model:{value:n.fieldValue,callback:function(t){e.$set(n,"fieldValue",t)},expression:"subItem.fieldValue"}})]:["depSelect"].includes(n.jnpfKey)?[t("JnpfDepSelect",{attrs:{placeholder:"请选择",selectType:n.selectType,ableIds:n.ableIds,multiple:n.multiple,clearable:"",disabled:n.disabled},model:{value:n.fieldValue,callback:function(t){e.$set(n,"fieldValue",t)},expression:"subItem.fieldValue"}})]:"popupTableSelect"===n.jnpfKey?[t("JnpfPopupTableSelect",{attrs:{placeholder:n.placeholder,interfaceId:n.interfaceId,multiple:n.multiple,columnOptions:n.columnOptions,propsValue:n.propsValue,relationField:n.relationField,hasPage:n.hasPage,pageSize:n.pageSize,popupType:n.popupType,popupTitle:n.popupTitle,popupWidth:n.popupWidth,filterable:n.filterable,disabled:n.disabled,clearable:"",templateJson:n.templateJson},model:{value:n.fieldValue,callback:function(t){e.$set(n,"fieldValue",t)},expression:"subItem.fieldValue"}})]:"relationForm"===n.jnpfKey?[t("JnpfRelationForm",{attrs:{placeholder:"请选择",modelId:n.modelId,clearable:"",multiple:n.multiple,columnOptions:n.columnOptions,relationField:n.relationField,hasPage:n.hasPage,pageSize:n.pageSize,disabled:n.disabled},model:{value:n.fieldValue,callback:function(t){e.$set(n,"fieldValue",t)},expression:"subItem.fieldValue"}})]:"popupSelect"===n.jnpfKey?[t("JnpfPopupSelect",{attrs:{placeholder:"请选择",interfaceId:n.interfaceId,clearable:"",multiple:n.multiple,columnOptions:n.columnOptions,propsValue:n.propsValue,relationField:n.relationField,hasPage:n.hasPage,pageSize:n.pageSize,popupType:n.popupType,templateJson:i.templateJson,popupTitle:n.popupTitle,popupWidth:n.popupWidth,disabled:n.disabled},model:{value:n.fieldValue,callback:function(t){e.$set(n,"fieldValue",t)},expression:"subItem.fieldValue"}})]:["userSelect"].includes(n.jnpfKey)?[t("JnpfUserSelect",{staticClass:"item",attrs:{placeholder:"请选择",clearable:"",disabled:n.disabled,selectType:"all"!=n.selectType&&"custom"!=n.selectType?"all":n.selectType,ableIds:n.ableIds,multiple:n.multiple},model:{value:n.fieldValue,callback:function(t){e.$set(n,"fieldValue",t)},expression:"subItem.fieldValue"}})]:["usersSelect"].includes(n.jnpfKey)?[t("jnpf-users-select",{attrs:{clearable:"",selectType:n.selectType,ableIds:n.ableIds,multiple:n.multiple,disabled:n.disabled},model:{value:n.fieldValue,callback:function(t){e.$set(n,"fieldValue",t)},expression:"subItem.fieldValue"}})]:["createUser","modifyUser"].includes(n.jnpfKey)?[t("JnpfUserSelect",{attrs:{placeholder:"请选择",multiple:n.multiple,clearable:"",disabled:n.disabled},model:{value:n.fieldValue,callback:function(t){e.$set(n,"fieldValue",t)},expression:"subItem.fieldValue"}})]:["posSelect"].includes(n.jnpfKey)?[t("JnpfPosSelect",{staticClass:"subItem",attrs:{placeholder:"请选择",clearable:"",selectType:n.selectType,ableIds:n.ableIds,multiple:n.multiple,disabled:n.disabled},model:{value:n.fieldValue,callback:function(t){e.$set(n,"fieldValue",t)},expression:"subItem.fieldValue"}})]:["currPosition"].includes(n.jnpfKey)?[t("JnpfPosSelect",{staticClass:"subItem",attrs:{placeholder:"请选择",clearable:"",multiple:n.multiple,disabled:n.disabled,ableIds:n.ableIds,selectType:n.selectType},model:{value:n.fieldValue,callback:function(t){e.$set(n,"fieldValue",t)},expression:"subItem.fieldValue"}})]:"areaSelect"===n.jnpfKey?[t("JnpfAreaSelect",{key:n.cellKey,attrs:{placeholder:"请选择",level:n.level,multiple:n.multiple,clearable:"",disabled:n.disabled},model:{value:n.fieldValue,callback:function(t){e.$set(n,"fieldValue",t)},expression:"subItem.fieldValue"}})]:"groupSelect"===n.jnpfKey?[t("JnpfGroupSelect",{attrs:{multiple:n.multiple,placeholder:"请选择",clearable:"",disabled:n.disabled,ableIds:n.ableIds,selectType:n.selectType},model:{value:n.fieldValue,callback:function(t){e.$set(n,"fieldValue",t)},expression:"subItem.fieldValue"}})]:"roleSelect"===n.jnpfKey?[t("JnpfRoleSelect",{attrs:{multiple:n.multiple,placeholder:"请选择",clearable:"",disabled:n.disabled,ableIds:n.ableIds,selectType:n.selectType},model:{value:n.fieldValue,callback:function(t){e.$set(n,"fieldValue",t)},expression:"subItem.fieldValue"}})]:[t("el-input",{attrs:{disabled:n.disabled,placeholder:"请输入"},on:{input:e.input},model:{value:n.fieldValue,callback:function(t){e.$set(n,"fieldValue",t)},expression:"subItem.fieldValue"}})]],2),t("el-col",{staticStyle:{"text-align":"right"},attrs:{span:2}},[t("div",{staticClass:"icon-ym icon-ym-btn-clearn clearn-color",staticStyle:{width:"100%",margin:"3px -29px"},on:{click:function(t){return e.delItem(l,a)}}})])],1)],1)}))],2)],1)})),[e.type?t("div",{staticClass:"link-text",on:{click:function(t){return e.addGroup()}}},[t("i",{staticClass:"icon-ym icon-ym-btn-add add-text"}),e._v("添加分组")]):t("el-button",{on:{click:e.addGroup}},[e._v("添加分组")])]],2)},n=[],a=i("5530"),_=(i("99af"),i("a9e3"),i("d3b7"),i("159b"),i("14d9"),i("2532"),i("e9c4"),i("a434"),i("4de4"),i("9b6f")),o=i("17de"),s=i("100e"),r=[{id:"and",fullName:"and"},{id:"or",fullName:"or"}],c=[{id:"==",fullName:"等于"},{id:"<>",fullName:"不等于"},{id:"like",fullName:"包含"},{id:"notLike",fullName:"不包含"},{id:"null",fullName:"为空"},{id:"notNull",fullName:"不为空"}],d=[{id:">=",fullName:"大于等于"},{id:">",fullName:"大于"},{id:"==",fullName:"等于"},{id:"<=",fullName:"小于等于"},{id:"<",fullName:"小于"},{id:"<>",fullName:"不等于"},{id:"between",fullName:"介于"},{id:"null",fullName:"为空"},{id:"notNull",fullName:"不为空"}],u=[{id:"==",fullName:"等于"},{id:"<>",fullName:"不等于"}],f=[].concat(u,[{id:"in",fullName:"包含任意一个"},{id:"notIn",fullName:"不包含任意一个"},{id:"null",fullName:"为空"},{id:"notNull",fullName:"不为空"}]),p=[].concat(u,[{id:"null",fullName:"为空"},{id:"notNull",fullName:"不为空"}]),m=["calculate","inputNumber","rate","slider","datePicker","timePicker","createTime","modifyTime"],b=["radio","checkbox","select","treeSelect","cascader","areaSelect","organizeSelect","depSelect","posSelect","userSelect","usersSelect","roleSelect","groupSelect","createUser","modifyUser","currOrganize","currPosition","popupTableSelect"],h=["switch"],g=["relationForm","popupSelect"],y={props:{modelType:{type:[String,Number],default:""},columnOptions:{type:Array,default:function(){return[]}},value:{type:Array,default:function(){return[]}},options:{type:Array,default:function(){return[]}},type:{type:Number,default:0},matchLogic:{type:String,default:"and"}},data:function(){return{nowJnpfKey:void 0,dialogVisible:!1,conditionList:[],matchLog:this.matchLogic,logicOptions:r,baseSymbolOptions:c,rangeSymbolOptions:d,selectSymbolOptions:f,switchSymbolOptions:u,useRangeSymbolList:m,useSelectSymbolList:b,useSwitchSymbolList:h,relationFormSymbolOptions:p,useRelationFormSymbolList:g}},computed:{usedFormItems:function(){var e=[],t=function t(i,l){i&&(i.__config__&&!["table"].includes(i.__config__.jnpfKey)&&i.__config__.children&&Array.isArray(i.__config__.children)&&t(i.__config__.children,i),Array.isArray(i)&&i.forEach((function(e){return t(e,l)})),i.__vModel__&&!["relationFormAttr","popupAttr","uploadFile","uploadImg","colorPicker","editor","link","button","text","alert","table"].includes(i.__config__.jnpfKey)&&e.push(i))};t(this.columnOptions);var i=e;return this.buildOptions(i),i}},watch:{value:{handler:function(e){e&&(this.conditionList=e)},immediate:!0,deep:!0}},methods:{getSymbolOptions:function(e){return this.useSwitchSymbolList.includes(e)?this.switchSymbolOptions:this.useRelationFormSymbolList.includes(e)?this.relationFormSymbolOptions:this.useRangeSymbolList.includes(e)?this.rangeSymbolOptions:this.useSelectSymbolList.includes(e)?this.selectSymbolOptions:this.baseSymbolOptions},input:function(){this.$forceUpdate()},buildOptions:function(e){return e.forEach((function(e){e.disabled=!1;var t=e.__config__;if(s["dyOptionsList"].includes(t.jnpfKey)&&("dictionary"===t.dataType&&t.dictionaryType&&(e.options=[],Object(_["i"])(t.dictionaryType).then((function(t){e.options=t.data.list}))),"dynamic"===t.dataType&&t.propsUrl)){e.options=[];var i={paramList:t.templateJson||[]};Object(o["i"])(t.propsUrl,i).then((function(t){e.options=Array.isArray(t.data)?t.data:[]}))}})),e},getData:function(){return{matchLogic:JSON.parse(JSON.stringify(this.matchLog)),conditionList:JSON.parse(JSON.stringify(this.conditionList))}},handleClose:function(){this.dialogVisible=!1},show:function(e){this.dialogVisible=!0,null!=e&&this.init(e)},addGroup:function(){var e={logic:"and",groups:[{field:"",symbol:"",jnpfKey:"",fieldValueType:2,fieldValue:void 0,fieldValueJnpfKey:"",cellKey:+new Date}]};this.conditionList.push(e)},addItem:function(e){this.conditionList[e].groups.push({field:"",symbol:"",jnpfKey:"",fieldValueType:2,fieldValue:void 0,fieldValueJnpfKey:"",cellKey:+new Date})},delGroup:function(e){this.conditionList.splice(e,1)},delItem:function(e,t){this.conditionList[e].groups.splice(t,1)},fieldNameChange:function(e,t,i,l){t.cellKey=+new Date;var n=this.usedFormItems.filter((function(t){return t.id==e}))[0];t.fieldName=n.__config__.label,t.jnpfKey=n.__config__.jnpfKey,n.jnpfKey=n.__config__.jnpfKey,t=Object(a["a"])(Object(a["a"])({},t),n),t.jnpfKey!=this.nowJnpfKey&&(t.symbol=void 0),t.disabled=["null","notNull"].includes(t.symbol),t.multiple=["in","notIn"].includes(t.symbol),t.symbol=void 0,t.fieldValue=void 0,"switch"==t.jnpfKey&&(t.fieldValue=0),this.$set(this.conditionList[i].groups,l,t),this.nowJnpfKey=t.jnpfKey},symbolChange:function(e,t,i,l){t.symbol=e,t.cellKey=+new Date,t.disabled=["null","notNull"].includes(e),t.multiple=["in","notIn"].includes(e),"cascader"==t.jnpfKey&&(t.props.multiple=!1,["in","notIn"].includes(e)&&(t.props.multiple=!0)),t.fieldValue=void 0,"switch"==t.jnpfKey&&(t.fieldValue=0),["in","notIn"].includes(e)&&(t.fieldValue=[]),this.$set(this.conditionList[i].groups,l,t)}}},v=y,O=(i("f2f5"),i("2877")),T=Object(O["a"])(v,l,n,!1,null,"7623557b",null);t["default"]=T.exports},b791:function(e,t,i){},c2da:function(module,__webpack_exports__,__webpack_require__){"use strict";var E_jinqueGit_ng_netrol_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("ade3"),_vue_babel_helper_vue_jsx_merge_props__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("2638"),_vue_babel_helper_vue_jsx_merge_props__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_vue_babel_helper_vue_jsx_merge_props__WEBPACK_IMPORTED_MODULE_1__),E_jinqueGit_ng_netrol_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("2909"),E_jinqueGit_ng_netrol_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("5530"),core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("caad"),core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("2532"),core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("d81d"),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("b0c0"),core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("14d9"),core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("99af"),core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_9__),core_js_modules_es_error_cause_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("d9e2"),core_js_modules_es_error_cause_js__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(core_js_modules_es_error_cause_js__WEBPACK_IMPORTED_MODULE_10__),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("d3b7"),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_11__),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("159b"),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_12__),core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("b64b"),core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_13__),core_js_modules_es_string_trim_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("498a"),core_js_modules_es_string_trim_js__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(core_js_modules_es_string_trim_js__WEBPACK_IMPORTED_MODULE_14__),core_js_modules_es_json_stringify_js__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("e9c4"),core_js_modules_es_json_stringify_js__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(core_js_modules_es_json_stringify_js__WEBPACK_IMPORTED_MODULE_15__),core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("e6cf"),core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_16__),_utils__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("ed08"),_components_Generator_utils_index_js__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("3424"),_utils_jnpf__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("2d7c"),_components_Generator_render_render_js__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("e287"),_components_Generator_generator_comConfig__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("100e"),_api_systemData_dataInterface__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("17de"),vuex__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("5880"),vuex__WEBPACK_IMPORTED_MODULE_23___default=__webpack_require__.n(vuex__WEBPACK_IMPORTED_MODULE_23__),formClass="form-"+_utils_jnpf__WEBPACK_IMPORTED_MODULE_19__["default"].idGenerator(),layouts={colFormItem:function(e,t){var i=this,l=t.__config__,n=buildListeners.call(this,t),a=l.labelWidth?"".concat(l.labelWidth,"px"):null;!1===l.showLabel&&(a="0");var _="cascader"===l.jnpfKey?e("JnpfCascader",_vue_babel_helper_vue_jsx_merge_props__WEBPACK_IMPORTED_MODULE_1___default()([{},{props:{props:t.props}},{attrs:{placeholder:t.placeholder,options:t.options,disabled:t.disabled,"show-all-levels":t.showAllLevels,separator:t.separator,clearable:t.clearable,filterable:t.filterable,multiple:t.multiple},style:t.style,on:{change:function(e){return i.onCascaderChange(e,t.on)},blur:function(e){return i.onCascaderBlur(e,t.on)}},key:t.__config__.renderKey,model:{value:i[i.formConf.formModel][t.__vModel__],callback:function(e){i.$set(i[i.formConf.formModel],t.__vModel__,e)}}}])):e(_components_Generator_render_render_js__WEBPACK_IMPORTED_MODULE_20__["default"],{attrs:{formData:this[this.formConf.formModel],conf:t,relations:"table"===l.jnpfKey?this.relations:void 0},on:Object(E_jinqueGit_ng_netrol_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__["a"])({},n),ref:"table"===l.jnpfKey?t.__vModel__:void 0,key:t.__config__.renderKey}),o=!l.visibility||Array.isArray(l.visibility)&&l.visibility.includes("pc");if(o&&!l.noShow){var s=e("el-col",{attrs:{span:l.span},class:l.className},[e("jnpf-form-tip-item",{attrs:{"label-width":a,prop:t.__vModel__,"tip-label":l.label&&l.showLabel?l.tipLabel:"",label:l.showLabel?l.label:""},key:l.renderKey},[_])]);return"alert"===l.jnpfKey&&(s=e("el-col",{attrs:{span:l.span},class:l.className},[e("jnpf-form-tip-item",{attrs:{"label-width":a,prop:t.__vModel__,"tip-label":l.label&&l.showLabel?l.tipLabel:"",label:l.showLabel?l.label:""},key:l.renderKey},[e("div",{style:"word-break: break-all"},[_])])])),"table"===l.jnpfKey&&(s=e("el-col",{attrs:{span:l.span},class:l.className},[e("el-form-item",{attrs:{"label-width":a,prop:t.__vModel__,label:l.showLabel?l.label:""},key:l.renderKey},[_])])),s}},rowFormItem:function(e,t){var i=this,l=buildListeners.call(this,t),n=t.__config__,a=!n.visibility||Array.isArray(n.visibility)&&n.visibility.includes("pc");if(a&&!n.noShow){if("tab"===t.__config__.jnpfKey)return e("el-col",{attrs:{span:t.__config__.span},class:"mb-10"},[e("el-tabs",{attrs:{type:t.type,"tab-position":t.tabPosition},on:Object(E_jinqueGit_ng_netrol_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__["a"])({},l),model:{value:t.__config__.active,callback:function(e){i.$set(t.__config__,"active",e)}}},[t.__config__.children.map((function(t,l){var n=renderChildren.call(i,e,t);return e("el-tab-pane",{attrs:{name:t.name,label:t.title}},[e("el-row",[n])])}))])]);if("collapse"===t.__config__.jnpfKey)return e("el-col",{attrs:{span:t.__config__.span},class:"mb-20"},[e("el-collapse",{attrs:{accordion:t.accordion},on:Object(E_jinqueGit_ng_netrol_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__["a"])({},l),model:{value:t.__config__.active,callback:function(e){i.$set(t.__config__,"active",e)}}},[t.__config__.children.map((function(t,l){var n=renderChildren.call(i,e,t);return e("el-collapse-item",{key:t.name,attrs:{title:t.title,name:t.name}},[e("el-row",[n])])}))])]);if("tableGrid"===t.__config__.jnpfKey)return e("el-col",{attrs:{span:t.__config__.span}},[e("el-row",{attrs:{gutter:t.__config__.gutter}},[e("table",{class:"table-grid-box",style:{"--borderType":t.__config__.borderType,"--borderColor":t.__config__.borderColor,"--borderWidth":t.__config__.borderWidth+"px"}},[e("tbody",[t.__config__.children.map((function(l){return e("tr",[l.__config__.children.map((function(l,n){var a=renderChildren.call(i,e,l);return l.__config__.merged?"":e("td",{attrs:{colspan:l.__config__.colspan||1,rowspan:l.__config__.rowspan||1},style:{"--backgroundColor":l.__config__.backgroundColor}},[e("el-col",[e("el-row",{attrs:{gutter:t.__config__.gutter}},[a])])])}))])}))])])])]);var _=renderChildren.apply(this,arguments);if("table"===t.__config__.jnpfKey){t.__config__.noShow||(this.tableRefs[t.__vModel__]=t);var o=Object(E_jinqueGit_ng_netrol_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__["a"])(Object(E_jinqueGit_ng_netrol_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__["a"])({},t),{},{config:t});return layouts.colFormItem.call(this,e,o)}if("card"===t.__config__.jnpfKey){var s=t.header;t.__config__.tipLabel&&(s=e("span",{slot:"label"},[t.header,e("el-tooltip",{attrs:{placement:"top",content:t.__config__.tipLabel}},[e("a",{class:"el-icon-question tooltip-question",style:"margin-left:4px"})])]));var r="";return t.header&&(r=e("div",{slot:"header"},[e("span",[s])])),e("el-col",{attrs:{span:t.__config__.span},class:"item-card"},[e("el-card",{attrs:{shadow:t.shadow,header:t.header},class:"mb-20"},[r,_])])}return"row"===t.__config__.jnpfKey?("flex"===t.type&&(_=e("el-row",{attrs:{type:t.type,justify:t.justify,align:t.align}},[_])),e("el-col",{attrs:{span:t.__config__.span}},[e("el-row",{attrs:{gutter:t.gutter}},[_])])):void 0}}};function renderFrom(e){var t=this.formConfCopy,i=[formClass];return t.formStyle&&i.push(t.formStyle),t.className&&(i=[].concat(Object(E_jinqueGit_ng_netrol_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_2__["a"])(i),Object(E_jinqueGit_ng_netrol_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_2__["a"])(t.className))),e("el-row",{attrs:{gutter:t.gutter},class:i},[e("el-form",_vue_babel_helper_vue_jsx_merge_props__WEBPACK_IMPORTED_MODULE_1___default()([{attrs:{size:t.size,"label-position":t.labelPosition,disabled:t.disabled,"label-width":"".concat(t.labelWidth,"px")},ref:t.formRef},{props:{model:this[t.formModel]}},{attrs:{rules:this[t.formRules]},nativeOn:{submit:function(e){e.preventDefault()}}}]),[renderFormItem.call(this,e,t.fields)])])}function formBtns(e){return e("el-col",[e("el-form-item",{attrs:{size:"large"}},[e("el-button",{attrs:{type:"primary"},on:{click:this.submitForm}},["提交"]),e("el-button",{on:{click:this.resetForm}},["重置"])])])}function renderFormItem(e,t){var i=this;return t.map((function(t){var l=t.__config__,n=layouts[l.layout];if(n)return n.call(i,e,t);throw new Error("没有与".concat(l.layout,"匹配的layout"))}))}function renderChildren(e,t){var i=t.__config__;return Array.isArray(i.children)?renderFormItem.call(this,e,i.children):null}function setValue(e,t,i){this.$set(t,"defaultValue",e),this.$set(this[this.formConf.formModel],i.__vModel__,e)}function buildListeners(e){var t=this,i=e.__config__,l={};return e.on&&Object.keys(e.on).forEach((function(n){var a=e.on[n],_=t.jnpf.getScriptFunc.call(t,a);_&&(l[n]=function(l){if("change"===n){var a="";if(["select","radio","checkbox"].includes(i.jnpfKey)){var o=e.options;if(e.multiple||"checkbox"===i.jnpfKey){for(var s=[],r=0;r<l[0].length;r++)e:for(var c=0;c<o.length;c++)if(l[0][r]===o[c][e.props.value]){s.push(o[c]);break e}a=s}else{for(var d={},u=0;u<o.length;u++)if(l[0]===o[u][e.props.value]){d=o[u];break}a=d}}else a="inputNumber"===i.jnpfKey?l[0]:l.length>1?l[1]:l[0];_.call(t,Object(E_jinqueGit_ng_netrol_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__["a"])({data:a},t.parameter)),t.handleRelation(e.__vModel__)}else _.call(t,Object(E_jinqueGit_ng_netrol_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__["a"])({data:l[0]},t.parameter))})})),l.input=function(l){return setValue.call(t,l,i,e)},l}__webpack_exports__["a"]={components:{render:_components_Generator_render_render_js__WEBPACK_IMPORTED_MODULE_20__["default"]},props:{formConf:{type:Object,required:!0}},data:function(){var e,t=this,i=(e={formConfCopy:Object(_utils__WEBPACK_IMPORTED_MODULE_17__["b"])(this.formConf)},Object(E_jinqueGit_ng_netrol_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__["a"])(e,this.formConf.formModel,{}),Object(E_jinqueGit_ng_netrol_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__["a"])(e,this.formConf.formRules,{}),Object(E_jinqueGit_ng_netrol_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__["a"])(e,"options",{}),Object(E_jinqueGit_ng_netrol_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__["a"])(e,"tableRefs",{}),Object(E_jinqueGit_ng_netrol_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__["a"])(e,"relations",{}),Object(E_jinqueGit_ng_netrol_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__["a"])(e,"isTableValid",!1),e);return this.initCss(i.formConfCopy),this.initFormData(i.formConfCopy.fields,i[this.formConf.formModel]),this.initRelationForm(i.formConfCopy.fields),this.buildRules(i.formConfCopy.fields,i[this.formConf.formRules]),this.buildOptions(i.formConfCopy.fields,i.options,i[this.formConf.formModel]),this.buildRelations(i.formConfCopy.fields,i.relations),this.$nextTick((function(){t.onLoad(i.formConfCopy)})),i},provide:function(){return{parameter:this.parameter}},computed:Object(E_jinqueGit_ng_netrol_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__["a"])(Object(E_jinqueGit_ng_netrol_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__["a"])({},Object(vuex__WEBPACK_IMPORTED_MODULE_23__["mapGetters"])(["userInfo"])),{},{formDataConf:function(){var e=this.formConf.formModel;return this[e]},parameter:function(){var e=this.formConfCopy.formData?this.formConfCopy.formData:{};return this[this.formConf.formModel].id=e.id||"",this[this.formConf.formModel].flowId=e.flowId||"",{formData:this[this.formConf.formModel],setFormData:this.setFormData,setShowOrHide:this.setShowOrHide,setRequired:this.setRequired,setDisabled:this.setDisabled,onlineUtils:this.jnpf.onlineUtils}}}),mounted:function(){var e=this;this.initRelationData(),this.$nextTick((function(){e.$refs[e.formConf.formRef].clearValidate()}))},methods:{initRelationData:function(){var e=this,t=function t(i){i.forEach((function(i){e.handleDefaultRelation(i.__vModel__),i.__config__.children&&t(i.__config__.children)}))};t(this.formConfCopy.fields)},initCss:function(e){document.getElementById("styleId")&&document.getElementById("styleId").remove();var t=document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",i.id="styleId",i.innerText=this.buildCSS(e.classJson),t.appendChild(i)},buildCSS:function(e){e=e.trim();var t="",i=e.split("}");return i.forEach((function(e){e&&(e="."+formClass+" "+e+"}",t+=e)})),t},initFormData:function(e,t){var i=this;this.$store.commit("generator/UPDATE_RELATION_DATA",{}),e.forEach((function(e){var l=e.__config__;e.__vModel__&&(t[e.__vModel__]=l.defaultValue),"table"!=e.__config__.jnpfKey&&l.children&&i.initFormData(l.children,t)}))},buildRelations:function(e,t){var i=this;e.forEach((function(e){var l=e.__config__;if(_components_Generator_generator_comConfig__WEBPACK_IMPORTED_MODULE_21__["dyOptionsList"].indexOf(l.jnpfKey)>-1&&"dynamic"===l.dataType&&l.templateJson&&l.templateJson.length)for(var n=0;n<l.templateJson.length;n++){var a=l.templateJson[n];if(a.relationField){var _=Object(E_jinqueGit_ng_netrol_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__["a"])(Object(E_jinqueGit_ng_netrol_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__["a"])({},e),{},{realVModel:e.__config__.isSubTable?e.__config__.parentVModel+"-"+e.__vModel__:e.__vModel__,opType:"setOptions"});if(t.hasOwnProperty(a.relationField)){var o=t[a.relationField].some((function(t){return t.realVModel===e.realVModel}));o||t[a.relationField].push(_)}else t[a.relationField]=[_]}}if("userSelect"===l.jnpfKey&&["dep","pos","role","group"].includes(e.selectType)&&e.relationField){var s=Object(E_jinqueGit_ng_netrol_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__["a"])(Object(E_jinqueGit_ng_netrol_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__["a"])({},e),{},{realVModel:e.__config__.isSubTable?e.__config__.parentVModel+"-"+e.__vModel__:e.__vModel__,opType:"setUserOptions"});if(t.hasOwnProperty(e.relationField)){var r=t[e.relationField].some((function(t){return t.realVModel===e.realVModel}));r||t[e.relationField].push(s)}else t[e.relationField]=[s]}if("areaSelect"===l.jnpfKey&&["address","cities"].includes(e.selectType)&&e.relationField){var c=Object(E_jinqueGit_ng_netrol_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__["a"])(Object(E_jinqueGit_ng_netrol_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__["a"])({},e),{},{realVModel:e.__config__.isSubTable?e.__config__.parentVModel+"-"+e.__vModel__:e.__vModel__,opType:"setAddressOptions"});if(t.hasOwnProperty(e.relationField)){var d=t[e.relationField].some((function(t){return t.realVModel===e.realVModel}));d||t[e.relationField].push(c)}else t[e.relationField]=[c]}if("popupSelect"===l.jnpfKey&&e.templateJson&&e.templateJson.length)for(var u=0;u<e.templateJson.length;u++){var f=e.templateJson[u];if(f.relationField){var p=Object(E_jinqueGit_ng_netrol_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__["a"])(Object(E_jinqueGit_ng_netrol_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__["a"])({},e),{},{realVModel:e.__config__.isSubTable?e.__config__.parentVModel+"-"+e.__vModel__:e.__vModel__,opType:"setPopupOptions"});if(t.hasOwnProperty(f.relationField)){var m=t[f.relationField].some((function(t){return t.realVModel===e.realVModel}));m||t[f.relationField].push(p)}else t[f.relationField]=[p]}}if("datePicker"===l.jnpfKey){if(l.startTimeRule)if(1==l.startTimeType)e.startTime=l.startTimeValue;else if(3==l.startTimeType)e.startTime=(new Date).getTime();else if(4==l.startTimeType){var b="";1==l.startTimeTarget||2==l.startTimeTarget?(b=Object(_components_Generator_utils_index_js__WEBPACK_IMPORTED_MODULE_18__["getDateDay"])(l.startTimeTarget,l.startTimeType,l.startTimeValue),e.startTime=new Date(b).getTime()):3==l.startTimeTarget?(b=Object(_components_Generator_utils_index_js__WEBPACK_IMPORTED_MODULE_18__["getBeforeData"])(l.startTimeValue),e.startTime=new Date(b).getTime()):e.startTime=Object(_components_Generator_utils_index_js__WEBPACK_IMPORTED_MODULE_18__["getBeforeTime"])(l.startTimeTarget,l.startTimeValue).getTime()}else if(5==l.startTimeType){var h="";1==l.startTimeTarget||2==l.startTimeTarget?(h=Object(_components_Generator_utils_index_js__WEBPACK_IMPORTED_MODULE_18__["getDateDay"])(l.startTimeTarget,l.startTimeType,l.startTimeValue),e.startTime=new Date(h).getTime()):3==l.startTimeTarget?(h=Object(_components_Generator_utils_index_js__WEBPACK_IMPORTED_MODULE_18__["getLaterData"])(l.startTimeValue),e.startTime=new Date(h).getTime()):e.startTime=Object(_components_Generator_utils_index_js__WEBPACK_IMPORTED_MODULE_18__["getLaterTime"])(l.startTimeTarget,l.startTimeValue).getTime()}if(l.endTimeRule)if(1==l.endTimeType)e.endTime=l.endTimeValue;else if(3==l.endTimeType)e.endTime=(new Date).getTime();else if(4==l.endTimeType){var g="";1==l.endTimeTarget||2==l.endTimeTarget?(g=Object(_components_Generator_utils_index_js__WEBPACK_IMPORTED_MODULE_18__["getDateDay"])(l.endTimeTarget,l.endTimeType,l.endTimeValue),e.endTime=new Date(g).getTime()):3==l.endTimeTarget?(g=Object(_components_Generator_utils_index_js__WEBPACK_IMPORTED_MODULE_18__["getBeforeData"])(l.endTimeValue),e.endTime=new Date(g).getTime()):e.endTime=Object(_components_Generator_utils_index_js__WEBPACK_IMPORTED_MODULE_18__["getBeforeTime"])(l.endTimeTarget,l.endTimeValue).getTime()}else if(5==l.endTimeType){var y="";1==l.endTimeTarget||2==l.endTimeTarget?(y=Object(_components_Generator_utils_index_js__WEBPACK_IMPORTED_MODULE_18__["getDateDay"])(l.endTimeTarget,l.endTimeType,l.endTimeValue),e.endTime=new Date(y).getTime()):3==l.endTimeTarget?(y=Object(_components_Generator_utils_index_js__WEBPACK_IMPORTED_MODULE_18__["getLaterData"])(l.endTimeValue),e.endTime=new Date(y).getTime()):e.endTime=Object(_components_Generator_utils_index_js__WEBPACK_IMPORTED_MODULE_18__["getLaterTime"])(l.endTimeTarget,l.endTimeValue).getTime()}if(e.__config__.startRelationField){var v=Object(E_jinqueGit_ng_netrol_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__["a"])(Object(E_jinqueGit_ng_netrol_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__["a"])({},e),{},{realVModel:e.__config__.isSubTable?e.__config__.parentVModel+"-"+e.__vModel__:e.__vModel__,opType:"setDate"});if(t.hasOwnProperty(e.__config__.startRelationField)){var O=t[e.__config__.startRelationField].some((function(t){return t.realVModel===e.realVModel}));O||t[e.__config__.startRelationField].push(v)}else t[e.__config__.startRelationField]=[v]}if(e.__config__.endRelationField){var T=Object(E_jinqueGit_ng_netrol_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__["a"])(Object(E_jinqueGit_ng_netrol_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__["a"])({},e),{},{realVModel:e.__config__.isSubTable?e.__config__.parentVModel+"-"+e.__vModel__:e.__vModel__,opType:"setDate"});if(t.hasOwnProperty(e.__config__.endRelationField)){var j=t[e.__config__.endRelationField].some((function(t){return t.realVModel===e.realVModel}));j||t[e.__config__.endRelationField].push(T)}else t[e.__config__.endRelationField]=[T]}}if("timePicker"===l.jnpfKey){var E="HH:mm"===e.format?"HH:mm:00":e.format;if(l.startTimeRule)if(1==l.startTimeType)e.startTime=l.startTimeValue||"00:00:00",3==e.startTime.split(":").length?e.startTime=e.startTime:e.startTime=e.startTime+":00";else if(3==l.startTimeType)e.startTime=i.jnpf.toDate(new Date,E);else if(4==l.startTimeType){var M="";M=Object(_components_Generator_utils_index_js__WEBPACK_IMPORTED_MODULE_18__["getBeforeTime"])(l.startTimeTarget,l.startTimeValue),e.startTime=i.jnpf.toDate(M,E)}else if(5==l.startTimeType){var D="";D=Object(_components_Generator_utils_index_js__WEBPACK_IMPORTED_MODULE_18__["getLaterTime"])(l.startTimeTarget,l.startTimeValue),e.startTime=i.jnpf.toDate(D,E)}if(l.endTimeRule)if(1==l.endTimeType)e.endTime=l.endTimeValue||"23:59:59",3==e.endTime.split(":").length?e.endTime=e.endTime:e.endTime=e.endTime+":00";else if(3==l.endTimeType)e.endTime=i.jnpf.toDate(new Date,E);else if(4==l.endTimeType){var P="";P=Object(_components_Generator_utils_index_js__WEBPACK_IMPORTED_MODULE_18__["getBeforeTime"])(l.endTimeTarget,l.endTimeValue),e.endTime=i.jnpf.toDate(P,E)}else if(5==l.endTimeType){var C="";C=Object(_components_Generator_utils_index_js__WEBPACK_IMPORTED_MODULE_18__["getLaterTime"])(l.endTimeTarget,l.endTimeValue),e.endTime=i.jnpf.toDate(C,E)}if(e.__config__.startRelationField){var I=Object(E_jinqueGit_ng_netrol_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__["a"])(Object(E_jinqueGit_ng_netrol_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__["a"])({},e),{},{realVModel:e.__config__.isSubTable?e.__config__.parentVModel+"-"+e.__vModel__:e.__vModel__,opType:"setTime"});if(t.hasOwnProperty(e.__config__.startRelationField)){var L=t[e.__config__.startRelationField].some((function(t){return t.realVModel===e.realVModel}));L||t[e.__config__.startRelationField].push(I)}else t[e.__config__.startRelationField]=[I]}if(e.__config__.endRelationField){var k=Object(E_jinqueGit_ng_netrol_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__["a"])(Object(E_jinqueGit_ng_netrol_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__["a"])({},e),{},{realVModel:e.__config__.isSubTable?e.__config__.parentVModel+"-"+e.__vModel__:e.__vModel__,opType:"setTime"});if(t.hasOwnProperty(e.__config__.endRelationField)){var K=t[e.__config__.endRelationField].some((function(t){return t.realVModel===e.realVModel}));K||t[e.__config__.endRelationField].push(k)}else t[e.__config__.endRelationField]=[k]}}l.children&&i.buildRelations(l.children,t)}))},handleRelation:function(e){var t=this;if(e){var i=this.relations;for(var l in i)if(l===e)for(var n=function(e){var n=i[l][e],a=n.realVModel||n.__vModel__,_=n.__config__,o=_.jnpfKey,s="";if((["checkbox","cascader"].includes(o)||["select","treeSelect","popupSelect","popupTableSelect","userSelect"].includes(o)&&n.multiple)&&(s=[]),a.includes("-")){var r=a.split("-")[0];t.$refs[r]&&t.$refs[r].$children[0]&&t.$refs[r].$children[0].handleRelationForParent(n,s)}else{if(t.setFormData(n.__vModel__,s),"setOptions"===n.opType){var c={paramList:t.getParamList(_.templateJson,t[t.formConf.formModel])};Object(_api_systemData_dataInterface__WEBPACK_IMPORTED_MODULE_22__["i"])(_.propsUrl,c).then((function(e){var i=e.data;t.setFieldOptions(n.__vModel__,i)}))}if("setUserOptions"===n.opType){var d=t[t.formConf.formModel][n.relationField]||[];t.comSet("ableRelationIds",n.__vModel__,Array.isArray(d)?d:[d])}if("setAddressOptions"===n.opType){var u=t[t.formConf.formModel][n.relationField]||[];t.comSet("ableAddressIds",n.__vModel__,Array.isArray(u)?u:[u])}if(n.opType,"setDate"===n.opType){var f="",p="";f=2==n.__config__.startTimeType?t[t.formConf.formModel][n.__config__.startRelationField]||0:n.startTime,p=2==n.__config__.endTimeType?t[t.formConf.formModel][n.__config__.endRelationField]||0:n.endTime,t.comSet("startTime",n.__vModel__,f),t.comSet("endTime",n.__vModel__,p)}if("setTime"===n.opType){var m="",b="";2==n.__config__.startTimeType?(m=t[t.formConf.formModel][n.__config__.startRelationField]||"00:00:00",m&&3==m.split(":").length?m=m:m+=":00"):m=n.startTime,2==n.__config__.endTimeType?(b=t[t.formConf.formModel][n.__config__.endRelationField]||"23:59:59",b&&3==b.split(":").length?b=b:b+=":00"):b=n.endTime,t.comSet("startTime",n.__vModel__,m),t.comSet("endTime",n.__vModel__,b)}}},a=0;a<i[l].length;a++)n(a)}},handleDefaultRelation:function(e){if(e){var t=this.relations;for(var i in t)if(i===e)for(var l=0;l<t[i].length;l++){var n=t[i][l],a=n.realVModel||n.__vModel__;n.__config__;if(a.includes("-")){var _=a.split("-")[0];this.$refs[_]&&this.$refs[_].$children[0]&&this.$refs[_].$children[0].handleRelationForParent(n,"",!0)}else{if("setUserOptions"===n.opType){var o=this[this.formConf.formModel][n.relationField]||[];this.comSet("ableRelationIds",n.__vModel__,Array.isArray(o)?o:[o])}if("setAddressOptions"===n.opType){var s=this[this.formConf.formModel][n.relationField]||[];this.comSet("ableAddressIds",n.__vModel__,Array.isArray(s)?s:[s])}if("setDate"===n.opType){var r="",c="";r=2==n.__config__.startTimeType?this[this.formConf.formModel][n.__config__.startRelationField]||0:n.startTime,c=2==n.__config__.endTimeType?this[this.formConf.formModel][n.__config__.endRelationField]||0:n.endTime,this.comSet("startTime",n.__vModel__,r),this.comSet("endTime",n.__vModel__,c)}if("setTime"===n.opType){var d="",u="";d=2==n.__config__.startTimeType?this[this.formConf.formModel][n.__config__.startRelationField]||"00:00:00":n.startTime,2==n.__config__.endTimeType?(u=this[this.formConf.formModel][n.__config__.endRelationField]||"23:59:59",u&&3==u.split(":").length?u=u:u+=":00"):u=n.endTime,d&&(3==d.split(":").length?d=d:d+=":00"),u&&(3==u.split(":").length?u=u:u+=":00"),this.comSet("startTime",n.__vModel__,d),this.comSet("endTime",n.__vModel__,u)}}}}},getParamList:function(e,t){for(var i=0;i<e.length;i++)e[i].relationField&&(e[i].defaultValue=t[e[i].relationField]||"");return e},initRelationForm:function(e){var t=this;e.forEach((function(i){var l=i.__config__;if("relationFormAttr"==l.jnpfKey||"popupAttr"==l.jnpfKey){var n=i.relationField.split("_jnpfTable_")[0];e.forEach((function(e){var t=Array.isArray(e.__config__.visibility)&&!e.__config__.visibility.includes("pc");n!=e.__vModel__||!t&&!e.__config__.noShow||i.__vModel__||(i.__config__.noShow=!0)}))}i.__config__.children&&i.__config__.children.length&&t.initRelationForm(i.__config__.children)}))},buildOptions:function(e,t,i){var l=this;e.forEach((function(e){var n=e.__config__;if(_components_Generator_generator_comConfig__WEBPACK_IMPORTED_MODULE_21__["dyOptionsList"].indexOf(n.jnpfKey)>-1)if("dictionary"===n.dataType&&n.dictionaryType)e.options=[],l.$store.dispatch("base/getDicDataSelector",n.dictionaryType).then((function(i){e.options=i,t[e.__vModel__+"Options"]=e.options}));else if("dynamic"===n.dataType&&n.propsUrl){e.options=[];var a={paramList:n.templateJson?l.getParamList(n.templateJson,i):[]};Object(_api_systemData_dataInterface__WEBPACK_IMPORTED_MODULE_22__["i"])(n.propsUrl,a).then((function(i){e.options=Array.isArray(i.data)?i.data:[],t[e.__vModel__+"Options"]=e.options}))}else t[e.__vModel__+"Options"]=e.options;n.children&&"table"!==n.jnpfKey&&l.buildOptions(n.children,t,i)}))},buildRules:function buildRules(componentList,rules){var _this13=this;componentList.forEach((function(cur){var config=JSON.parse(JSON.stringify(cur.__config__));if(Array.isArray(config.regList)||(config.regList=[]),config.required){var required={required:config.required,message:cur.placeholder};Array.isArray(config.defaultValue)&&(required.type="array",required.message="请至少选择一个".concat(config.label)),void 0===required.message&&(required.message="".concat(config.label,"不能为空")),config.regList.push(required)}rules[cur.__vModel__]=config.regList.map((function(item){return item.pattern&&_this13.isRegExp(item.pattern)&&(item.pattern=eval(item.pattern)),item.trigger=config.trigger||"blur",item})),config.children&&"table"!==config.jnpfKey&&_this13.buildRules(config.children,rules)}))},isRegExp:function isRegExp(val){try{return"[object RegExp]"===Object.prototype.toString.call(eval(val))}catch(_unused){return!1}},onLoad:function(e){if(e&&e.funcs&&e.funcs.onLoad){var t=this.jnpf.getScriptFunc.call(this,e.funcs.onLoad);t&&t(this.parameter)}},resetForm:function(){var e=this;this.$store.commit("generator/UPDATE_RELATION_DATA",{}),this.formConfCopy=Object(_utils__WEBPACK_IMPORTED_MODULE_17__["b"])(this.formConf),this.$refs[this.formConf.formRef].resetFields(),Object.keys(this.tableRefs).forEach((function(t){e.$refs[t]&&e.$refs[t].$children&&e.$refs[t].$children[0].resetTable()}))},checkTableData:function(){var e=this,t=!0;return Object.keys(this.tableRefs).forEach((function(i){if(e.$refs[i]&&e.$refs[i].$children){var l=e.$refs[i].$children[0].submit();l?e[e.formConf.formModel][i]=l:t=!1}})),t},getFieldOptions:function(e){if(!e)return[];var t=e.indexOf(".")>-1;if(t){var i=e.split(".");if(this.$refs[i[0]]&&this.$refs[i[0]].$children[0]){var l=this.$refs[i[0]].$children[0].getTableFieldOptions(i[1]);return l}return[]}return this.options[e+"Options"]||[]},setFormData:function(e,t){if(e&&this[this.formConf.formModel][e]!==t){var i=e.indexOf(".")>-1;if(i){var l=e.split(".");this.$refs[l[0]]&&this.$refs[l[0]].$children[0]&&this.$refs[l[0]].$children[0].setTableFormData(l[1],t)}else this.comSet("defaultValue",e,t),this[this.formConf.formModel][e]=t;this.handleRelation(e)}},setShowOrHide:function(e,t){var i=!!t,l=e.indexOf(".")>-1;if(l){var n=e.split(".");this.$refs[n[0]]&&this.$refs[n[0]].$children[0]&&this.$refs[n[0]].$children[0].setTableShowOrHide(n[1],!i)}else this.comSet("noShow",e,!i)},setRequired:function(e,t){var i=!!t,l=e.indexOf(".")>-1;l||(this.comSet("required",e,i),this.buildRules(this.formConfCopy.fields,this[this.formConf.formRules]))},setDisabled:function(e,t){var i=!!t,l=e.indexOf(".")>-1;l||this.comSet("disabled",e,i)},setFieldOptions:function(e,t){var i=Array.isArray(t)?t:[],l=e.indexOf(".")>-1;l||this.comSet("options",e,i)},comSet:function(e,t,i){var l=this;if(t){var n=function n(a){for(var _=0;_<a.length;_++){var o=a[_];if(o.__vModel__&&o.__vModel__===t){switch(e){case"disabled":l.$set(o,e,i);break;case"ableRelationIds":l.$set(o,e,i);break;case"ableAddressIds":l.$set(o,e,i);break;case"startTime":l.$set(o,e,i);break;case"endTime":l.$set(o,e,i);break;case"options":if(_components_Generator_generator_comConfig__WEBPACK_IMPORTED_MODULE_21__["dyOptionsList"].indexOf(o.__config__.jnpfKey)>-1){"treeSelect"===o.__config__.jnpfKey||o.__config__.jnpfKey;o.options=i}break;default:l.$set(o.__config__,e,i);break}o.__config__.renderKey=+new Date+o.__vModel__;break}o.__config__&&"table"!==o.__config__.jnpfKey&&o.__config__.children&&Array.isArray(o.__config__.children)&&n(o.__config__.children)}};n(this.formConfCopy.fields)}},beforeSubmit:function(){if(!this.formConfCopy||!this.formConfCopy.funcs||!this.formConfCopy.funcs.beforeSubmit)return Promise.resolve();var e=this.jnpf.getScriptFunc.call(this,this.formConfCopy.funcs.beforeSubmit);return e?e(this.parameter):Promise.resolve()},afterSubmit:function(){if(this.formConfCopy&&this.formConfCopy.funcs&&this.formConfCopy.funcs.afterSubmit){var e=this.jnpf.getScriptFunc.call(this,this.formConfCopy.funcs.afterSubmit);e&&e(this.parameter)}},submitForm:function(e){var t=this;this.isTableValid=this.checkTableData();try{this.beforeSubmit().then((function(){t.submit(e)}))}catch(i){this.submit(e)}},submit:function(e){var t=this;this.$refs[this.formConf.formRef].validate((function(i){return!!i&&(!!t.isTableValid&&(t.$emit("submit",t[t.formConf.formModel],t.afterSubmit,e),!0))}))},onCascaderChange:function(e,t){if(t&&t.change){var i=this.jnpf.getScriptFunc.call(this,t.change);i&&i.call(this,Object(E_jinqueGit_ng_netrol_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__["a"])({data:e},this.parameter))}},onCascaderBlur:function(e,t){if(t&&t.blur){var i=this.jnpf.getScriptFunc.call(this,t.blur);i&&i.call(this,Object(E_jinqueGit_ng_netrol_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__["a"])({data:e},this.parameter))}}},render:function(e){return renderFrom.call(this,e)}}},c62f:function(e,t,i){"use strict";i("b791")},e287:function(e,t,i){"use strict";i.r(t);var l=i("5530"),n=i("2909"),a=i("53ca"),_=(i("d3b7"),i("b64b"),i("159b"),i("4d63"),i("c607"),i("ac1f"),i("2c3e"),i("25f0"),i("caad"),i("99af"),i("ed08"));function o(e,t){var i=this;e.props.value=t,e.on.input=function(e){i.$emit("input",e)}}function s(e){var t=this;["on","nativeOn"].forEach((function(i){var l=Object.keys(e[i]||{});l.forEach((function(l){e[i][l];"string"===typeof l&&(e[i][l]=function(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return t.$emit(l,i)})}))}))}function r(e,t,i){var _=this,s=e.__config__.jnpfKey;Object.keys(e).forEach((function(i){var s=e[i];"__vModel__"===i?o.call(_,t,e.__config__.defaultValue):"props"===i?t[i][i]=s:void 0!==t[i]?null===t[i]||t[i]instanceof RegExp||["boolean","string","number","function"].includes(Object(a["a"])(t[i]))?t[i]=s:Array.isArray(t[i])?t[i]=[].concat(Object(n["a"])(t[i]),Object(n["a"])(s)):t[i]=Object(l["a"])(Object(l["a"])({},t[i]),s):t.attrs[i]=s})),["calculate","table","barcode","qrcode","popupSelect","popupTableSelect","autoComplete"].includes(s)&&(t.attrs["formData"]=i),["table"].includes(s)&&(t.attrs["relations"]=this.relations,t.attrs["vModel"]=e.__vModel__),["popupAttr","calculate","relationFormAttr"].includes(s)&&(t.attrs["defaultValue"]=e.__config__.defaultValue),["relationForm","popupSelect"].includes(s)&&(t.attrs["field"]=e.__config__.tableName?e.__vModel__+"_jnpfTable_"+e.__config__.tableName+(e.__config__.isSubTable?"0":"1"):e.__vModel__),c(t)}function c(e){delete e.attrs.__config__,delete e.attrs.__slot__,delete e.attrs.__methods__}function d(){return{class:{},attrs:{},props:{},domProps:{},nativeOn:{},on:{},style:{},directives:[],scopedSlots:{},slot:null,key:null,ref:null,refInFor:!0}}t["default"]={props:{conf:{type:Object,required:!0},formData:{type:Object,default:function(){}},relations:Object},render:function(e){var t=d(),i=Object(_["b"])(this.conf),l=this.$slots.default||[];return s.call(this,i),r.call(this,i,t,this.formData),e(this.conf.__config__.tag,t,l)}}},e8d4:function(e,t,i){},f2f5:function(e,t,i){"use strict";i("e8d4")},f404:function(e,t,i){"use strict";i("3bac")}}]);
//# sourceMappingURL=index.umd.min.19.js.map